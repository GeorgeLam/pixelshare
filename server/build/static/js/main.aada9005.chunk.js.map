{"version":3,"sources":["components/1.jpg","firebase.js","Context.js","Layout.js","components/ImageHeader.js","components/ImageControls.js","components/CommentBox.js","components/RecentPhoto.js","components/Loader.js","components/Image.js","Home.js","components/SignUp.js","components/SignIn.js","Account.js","components/ImageDetailedBox.js","components/ImageModal.js","components/Uploader.js","components/EditProfileModal.js","UserPage.js","PhotoPage.js","Upload.js","App.js","serviceWorker.js","index.js","styles/image.module.css","img/trash.svg"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","UserContext","React","createContext","ModalContext","memo","pageTitle","children","customWidth","history","useHistory","useState","username","setUsername","useContext","setState","onAuthStateChanged","user","console","log","useEffect","displayName","state","Helmet","title","defer","Navbar","bg","expand","fixed","Container","style","width","Row","Brand","href","Toggle","aria-controls","Collapse","id","Nav","className","to","exact","activeClassName","onClick","signOut","then","push","catch","error","display","flexDirection","minHeight","flex","Col","xs","md","lg","props","fileName","comment","author","src","alt","height","fontSize","ImageStyles","color","textDecoration","format","commentTime","toUpperCase","caption","window","confirm","axios","post","queryType","response","data","setCommentsArray","comments","require","cursor","deletedCount","alert","likes","includes","likesArray","setLikesArray","likeStatus","setLikeStatus","likeRef","useRef","currentUser","length","ref","map","like","idx","CommentBox","commentsArray","commentRef","borderTop","placeholder","overflow","border","resize","padding","current","value","commentValue","photo","Card","key","_id","Header","variant","maxHeight","objectFit","Body","Text","margin","fontWeight","slice","listStyle","uploadTime","Loader","size","loading","recentPhotos","setRecentPhotos","query","setQuery","Home","SignUp","email","setEmail","password","setPassword","passwordConfirm","setPasswordConfirm","Form","Group","controlId","Label","Control","defaultValue","onChange","e","target","type","Button","createUserWithEmailAndPassword","res","updateProfile","SignIn","signIn","signInWithEmailAndPassword","code","message","onSubmit","form","Account","method","setMethod","ImageDetailedBox","backgroundColor","borderBottom","overflowY","deleteComment","newComments","ImageModal","browserNarrowWidth","outerWidth","modalShow","show","borderRadius","Modal","onHide","handleClose","dialogClassName","Uploader","captionRef","acceptableFile","setAcceptableFile","setFile","loaded","setLoaded","upload","a","preventDefault","files","URL","createObjectURL","unit","x","y","aspect","maxWidth","crop","setCrop","imageRef","setImageRef","croppedImage","setCroppedImage","setCroppedImageURL","getCroppedImg","image","canvas","document","createElement","scaleX","naturalWidth","scaleY","naturalHeight","getContext","drawImage","FileReader","toBlob","blob","onImageLoaded","onComplete","croppedImageUrl","encType","FormData","append","headers","setTimeout","location","name","multiple","accept","disabled","EditProfileModal","bioRef","setProfilePhotoChanged","handleProfileModalClose","closeButton","Title","for","rows","Footer","bio","setProfileData","go","match","browserWidth","userID","params","profileData","setShow","setData","profileModalShow","setProfileModalShow","handleProfileModalShow","handleShow","toLowerCase","class","i","position","left","right","PhotoPage","setPhoto","justifyContent","Upload","App","setModalShow","Provider","path","component","UserPage","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.aada9005.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/1.a282b009.jpg\";","import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA7f27Iu24JjQOd7wp4hK-VzGwYah0nsTo\",\r\n  authDomain: \"pixelshare-dee1b.firebaseapp.com\",\r\n  databaseURL: \"https://pixelshare-dee1b.firebaseio.com\",\r\n  projectId: \"pixelshare-dee1b\",\r\n  storageBucket: \"pixelshare-dee1b.appspot.com\",\r\n  messagingSenderId: \"179184967306\",\r\n  appId: \"1:179184967306:web:8008f9f3c1fc2ac0931773\",\r\n  measurementId: \"G-FMBPRG8J4X\",\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\n","import React from \"react\";\r\n\r\nexport const UserContext = React.createContext();\r\nexport const ModalContext = React.createContext(false);\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\n// import PropTypes from \"prop-types\";\r\n// import { useStaticQuery, graphql, Link } from \"gatsby\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport { auth, firestore } from \"./firebase\";\r\nimport { UserContext } from \"./Context\";\r\n\r\nimport {\r\n  Container,\r\n  Navbar,\r\n  Nav,\r\n  Form,\r\n  FormControl,\r\n  Button,\r\n  Row,\r\n  Col,\r\n} from \"react-bootstrap/\";\r\n\r\nconst Layout = ({ pageTitle, children, customWidth }) => {\r\n  let history = useHistory();\r\n\r\n  const [username, setUsername] = useState(null);\r\n  const [state, setState] = useContext(UserContext);\r\n  // console.log(state);\r\n  // const authCheck =\r\n  auth.onAuthStateChanged(function (user) {\r\n    if (user) {\r\n      setUsername(user);\r\n      // console.log(\"User currently logged in\", user);\r\n    } else {\r\n      console.log(\"Not logged in\");\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (username?.displayName) {\r\n      setState((state) => ({ user: username.displayName }));\r\n      console.log(\"effect\");\r\n    } else {\r\n      console.log(\"effect2\");\r\n      setState((state) => ({ user: null }));\r\n    }\r\n  }, [username]);\r\n\r\n  const handleLogOut = () => {\r\n    auth\r\n      .signOut()\r\n      .then(function () {\r\n        setUsername(null);\r\n        console.log(\"You were logged out...\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet\r\n        title={pageTitle ? `Pixelshare | ${pageTitle}` : `Pixelshare`}\r\n        defer={false}\r\n      />\r\n      <Navbar bg=\"light\" expand=\"md\" fixed=\"top\">\r\n        <Container style={{ width: \"80%\" }}>\r\n          {/* <Row>\r\n            <Col> */}\r\n          <Row>\r\n            <Navbar.Brand href=\"/\">Pixelshare</Navbar.Brand>\r\n          </Row>\r\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n\r\n          {/* <Row> */}\r\n          <Navbar.Collapse id=\"basic-navbar-nav\">\r\n            <Nav className=\"ml-auto\">\r\n              <Row>\r\n                <NavLink\r\n                  to=\"/\"\r\n                  exact\r\n                  className=\"mr-2 mr-md-3\"\r\n                  activeClassName=\"mr-2 mr-md-3 font-weight-bold\"\r\n                >\r\n                  Home\r\n                </NavLink>\r\n                <NavLink\r\n                  to=\"/upload\"\r\n                  className=\"mr-2 mr-md-3\"\r\n                  activeClassName=\"mr-2 mr-md-3 font-weight-bold\"\r\n                >\r\n                  Upload\r\n                </NavLink>\r\n                {username && (\r\n                  <NavLink\r\n                    to={`/user/${username?.displayName}`}\r\n                    className=\"mr-2 mr-md-3\"\r\n                    activeClassName=\"mr-2 mr-md-3 font-weight-bold\"\r\n                  >\r\n                    {username?.displayName}\r\n                  </NavLink>\r\n                )}\r\n                {username ? (\r\n                  <Link to=\"#\" onClick={handleLogOut}>\r\n                    Log out\r\n                  </Link>\r\n                ) : (\r\n                  <NavLink to=\"/login\" activeClassName=\"font-weight-bold\">\r\n                    Login\r\n                  </NavLink>\r\n                )}\r\n              </Row>\r\n            </Nav>\r\n          </Navbar.Collapse>\r\n          {/* </Row> */}\r\n          {/* </Col>\r\n          </Row> */}\r\n        </Container>\r\n      </Navbar>\r\n\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          minHeight: \"calc(100vh)\",\r\n        }}\r\n      >\r\n        <div style={{ flex: 1 }}>\r\n          <div className=\"h-100\">\r\n            <Col\r\n              xs={12}\r\n              md={11}\r\n              lg={customWidth ? customWidth : 5}\r\n              // xl={7}\r\n              className=\"mt-5 mx-auto\"\r\n            >\r\n              {children}\r\n            </Col>\r\n          </div>\r\n        </div>\r\n\r\n        <Navbar className=\"mt-3\" bg=\"light\">\r\n          <Container>\r\n            <Row className=\"mx-auto\">\r\n              <Col>\r\n                <a href=\"https://georgelam.dev\">George Lam</a> - 2020\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Navbar>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(Layout);\r\n","import React, { useContext } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { format, render, cancel, register } from \"timeago.js\";\r\nimport { UserContext } from \"../Context\";\r\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n// import { faCoffee } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst ImageHeader = (props) => {\r\n  console.log(props.fileName);\r\n  let history = useHistory();\r\n\r\n  const [state, setState] = useContext(UserContext);\r\n  console.log(state.user);\r\n  console.log(props);\r\n  // const deleteComment = props.deleteComment;\r\n\r\n  const deleteComment = (commentTime, author) => {\r\n    console.log(\"Deleting\", commentTime, author);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"commentDelete\",\r\n        fileName: props.fileName, ///////////////////\r\n        commentTime: commentTime,\r\n        author: author,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        props.setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const deletePhoto = (fileName) => {\r\n    console.log(\"Deleting\", fileName);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"photoDelete\",\r\n        fileName: fileName,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        if (response.data.deletedCount) {\r\n          alert(\"Photo has been deleted!\");\r\n          history.push(\"/\");\r\n        }\r\n        // setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className={`d-flex flex-row ${props.comment && \"mb-3 px-3 py-2\"}`}>\r\n      <div style={{ flex: 1, display: \"flex\" }}>\r\n        <Link to={`/user/${props.author}`}>\r\n          <img\r\n            // src={require(\"./1.jpg\")}\r\n            src={`https://pixelshare.s3.amazonaws.com/${props.author}`}\r\n            className=\"rounded-circle mr-3 profilePhoto\"\r\n            alt=\"user's profile picture\"\r\n            width=\"30\"\r\n            height=\"30\"\r\n          ></img>\r\n        </Link>\r\n        <div\r\n          className=\"d-flex flex-column\"\r\n          style={{ fontSize: props.comment ? \"0.8em\" : \"1em\" }}\r\n        >\r\n          <Link\r\n            to={`/user/${props.author}`}\r\n            className={ImageStyles.username}\r\n            style={{ color: \"black\", textDecoration: \"none\" }}\r\n          >\r\n            {props.author}\r\n          </Link>\r\n          {props.comment && (\r\n            <>\r\n              {\" \"}\r\n              <span>{props.comment}</span>\r\n              <span style={{ fontSize: 10, color: \"gray\" }}>\r\n                {format(props.commentTime).toUpperCase()}\r\n              </span>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        {props.author == state.user && props.comment && !props.caption && (\r\n          <span\r\n            onClick={() => {\r\n              if (window.confirm(\"Confirm comment deletion?\")) {\r\n                deleteComment(props.commentTime, props.author);\r\n              }\r\n            }}\r\n          >\r\n            <img\r\n              src={require(\"../img/trash.svg\")}\r\n              style={{ height: \" 30%\", cursor: \"pointer\" }}\r\n            ></img>\r\n          </span>\r\n        )}\r\n        {props.author == state.user && !props.comment && !props.caption && (\r\n          <span\r\n            onClick={() => {\r\n              if (window.confirm(\"Confirm photo deletion?\")) {\r\n                deletePhoto(props.fileName);\r\n              }\r\n            }}\r\n          >\r\n            <img\r\n              src={require(\"../img/trash.svg\")}\r\n              style={{ height: \" 30%\", cursor: \"pointer\" }}\r\n            ></img>\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageHeader);\r\n","import React, { useContext, useRef, useState } from \"react\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../Context\";\r\nimport { ModalContext } from \"../Context\";\r\n\r\nconst ImageControls = (props) => {\r\n  let history = useHistory();\r\n\r\n  //   console.log(props);\r\n  const [state, setState] = useContext(UserContext);\r\n  const [modalShow, setModalShow] = useContext(ModalContext);\r\n  console.log(props?.data?.likes?.includes(state.user));\r\n  const [likesArray, setLikesArray] = useState(props.data.likes || []);\r\n  const [likeStatus, setLikeStatus] = useState(\r\n    props?.data?.likes?.includes(state.user)\r\n  );\r\n  const likeRef = useRef();\r\n\r\n  const handleComment = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    history.push(`/p/${props.data.fileName}`);\r\n  };\r\n\r\n  const handleLike = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    console.log(\"Liking\", state);\r\n    console.log(likeRef);\r\n    setLikeStatus(!likeStatus);\r\n    // likeRef.current.span.outerHTML = `<span>Liked by <strong>${state.user}</strong>`;\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"like\",\r\n        fileName: props.data.fileName,\r\n        currentUser: state.user,\r\n        likeStatus: likeStatus,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setLikesArray(response.data.likes);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex flex-row\" style={{ color: \"black\", fontSize: 11 }}>\r\n        <Link to=\"#\" className=\"mr-2\" onClick={handleLike}>\r\n          {likeStatus ? <span>Unlike</span> : <span>Like</span>}\r\n        </Link>\r\n        <Link onClick={handleComment}>Comment</Link>\r\n      </div>\r\n      <div>\r\n        {likesArray?.length ? (\r\n          <>\r\n            {\" \"}\r\n            <span ref={likeRef}>Liked by </span>\r\n            {likesArray.map((like, idx) => (\r\n              <>\r\n                {idx ? \", \" : \"\"}\r\n                <strong>\r\n                  <Link style={{ color: \"black\" }} to={`/user/${like}`}>\r\n                    {like}\r\n                  </Link>\r\n                </strong>\r\n              </>\r\n            ))}\r\n          </>\r\n        ) : (\r\n          <span></span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ImageControls);\r\n","import React, { useContext, useRef, useState, useEffect } from \"react\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../Context\";\r\n\r\nconst CommentBox = (props) => {\r\n  let history = useHistory();\r\n  console.log(props.commentsArray);\r\n  // console.log(props.data.fileName);\r\n  const [state, setState] = useContext(UserContext);\r\n  const [commentsArray, setCommentsArray] = useState(props.commentsArray || []);\r\n\r\n  useEffect(() => {\r\n    console.log(commentsArray);\r\n  }, [commentsArray]);\r\n\r\n  const commentRef = useRef();\r\n\r\n  const handleComment = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    console.log(\"Posting\", state);\r\n    console.log(commentRef.current.value);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"comment\",\r\n        commentValue: commentRef.current.value,\r\n        fileName: props.data.fileName,\r\n        currentUser: state.user,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        commentRef.current.value = \"\";\r\n        props.setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        borderTop: \"1px solid rgba(0,0,0,0.1)\",\r\n      }}\r\n    >\r\n      <textarea\r\n        placeholder=\"Add a comment...\"\r\n        ref={commentRef}\r\n        style={{\r\n          width: \"100%\",\r\n          overflow: \"auto\",\r\n          border: \"none\",\r\n          resize: \"none\",\r\n          height: 40,\r\n          padding: \"0.4em 0.8em\",\r\n        }}\r\n      ></textarea>\r\n      <Link to=\"#\" style={{ padding: \"0.4em 0.7em\" }} onClick={handleComment}>\r\n        Post\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentBox;\r\n","import React, { useState } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { format, render, cancel, register } from \"timeago.js\";\r\n\r\nimport Card from \"react-bootstrap/Card\";\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageControls from \"./ImageControls\";\r\nimport CommentBox from \"./CommentBox\";\r\n\r\nconst RecentPhoto = ({ photo }) => {\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  console.log(\"ajaja\", photo);\r\n  const [commentsArray, setCommentsArray] = useState(photo.comments || []);\r\n\r\n  return (\r\n    <Card\r\n      key={photo._id}\r\n      style={{ width: \"100%\" }}\r\n      // className={ImageStyles.card}\r\n      className=\"my-5\"\r\n    >\r\n      <Card.Header>\r\n        <ImageHeader author={photo.author} fileName={photo.fileName} />\r\n      </Card.Header>\r\n      <img\r\n        variant=\"top\"\r\n        src={aws + photo.fileName}\r\n        // src={require(\"./1.jpg\")}\r\n        alt={`Photo uploaded by ${photo.author}`}\r\n        style={{ maxHeight: 500, objectFit: \"cover\", width: \"100%\" }}\r\n      />\r\n      <Card.Body>\r\n        <ImageControls data={photo} />\r\n\r\n        <Card.Text className=\"mt-1\">\r\n          {photo?.caption && <span>{photo?.caption}</span>}\r\n          <ul style={{ margin: 0, padding: 0 }}>\r\n            {commentsArray?.length > 2 && (\r\n              <Link\r\n                to={`/p/${photo?.fileName}`}\r\n                style={{ color: \"gray\", fontWeight: 400 }}\r\n              >\r\n                See all {commentsArray?.length} comments\r\n              </Link>\r\n            )}\r\n            {commentsArray?.length ? (\r\n              commentsArray?.slice(commentsArray.length - 2).map((comment) => (\r\n                <li style={{ listStyle: \"none\" }}>\r\n                  <strong className=\"mr-1\">\r\n                    <Link\r\n                      style={{ color: \"black\" }}\r\n                      to={`/user/${comment.user}`}\r\n                    >\r\n                      {comment.user}\r\n                    </Link>\r\n                  </strong>\r\n                  {comment.comment}\r\n                </li>\r\n              ))\r\n            ) : (\r\n              <></>\r\n            )}\r\n          </ul>\r\n          <span style={{ fontSize: 10 }}>\r\n            <Link to={`/p/${photo.fileName}`} style={{ color: \"gray\" }}>\r\n              {format(photo.uploadTime).toUpperCase()}\r\n            </Link>\r\n          </span>\r\n        </Card.Text>\r\n      </Card.Body>\r\n      <div>\r\n        <CommentBox\r\n          style={{ width: \"100%\" }}\r\n          data={photo}\r\n          commentsArray={commentsArray}\r\n          setCommentsArray={setCommentsArray}\r\n        />\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default React.memo(RecentPhoto);\r\n","import React from \"react\";\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\nimport { css } from \"@emotion/core\";\r\nimport ScaleLoader from \"react-spinners/ScaleLoader\";\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"my-5 text-center\">\r\n      <div className=\"mb-2\">Loading ...</div>\r\n      <div>\r\n        <div className=\"sweet-loading\">\r\n          <ScaleLoader\r\n            style={{ display: \"block\", margin: \"0 auto\" }}\r\n            size={150}\r\n            color={\"#123abc\"}\r\n            loading={1}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport RecentPhoto from \"./RecentPhoto\";\r\nimport Loader from \"./Loader\";\r\n\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst Image = () => {\r\n  console.log(\"IMAGE COMP RENDERING\");\r\n  const [showImageCount, setShowImageCount] = useState(3);\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  const [recentPhotos, setRecentPhotos] = useState();\r\n  // const recentPhotos = [\"../img/1.jpg\"];\r\n  const [commentsArray, setCommentsArray] = useState([]);\r\n  const [query, setQuery] = useState(\"recent\");\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\"/photos\", { queryType: query })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setRecentPhotos(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }, [query]);\r\n\r\n  return (\r\n    <div>\r\n      {recentPhotos ? (\r\n        <>\r\n          {recentPhotos?.slice(0, 100).map((photo, idx) => (\r\n            <RecentPhoto photo={photo} />\r\n          ))}\r\n          <span className=\"d-flex justify-content-center mb-3\">\r\n            <Link\r\n              to=\"#\"\r\n              onClick={() => {\r\n                // setShowImageCount(showImageCount + 3);\r\n                setQuery(\"moreRecentPhotos\");\r\n              }}\r\n            >\r\n              Load more photos...\r\n            </Link>\r\n          </span>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Loader />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Image);\r\n","import React from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Image from \"./components/Image\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\n\r\nconst Home = () => {\r\n  return (\r\n    <Layout pageTitle=\"Home\" customWidth={4}>\r\n      <Container>\r\n        <Row>\r\n          <Col xs={12} className=\"mx-auto\">\r\n            <Image />\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\n\r\nimport axios from \"axios\";\r\nimport { auth, firebase } from \"../firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { Card, Button, Form } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst SignUp = () => {\r\n  let history = useHistory();\r\n\r\n  const [email, setEmail] = useState();\r\n  const [username, setUsername] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [passwordConfirm, setPasswordConfirm] = useState();\r\n\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  //   const [recentPhotos, setRecentPhotos] = useState();\r\n  const recentPhotos = [\"../img/1.jpg\"];\r\n\r\n  //   useEffect(() => {\r\n  //     axios\r\n  //       .get(\"http://localhost:5000/photos\")\r\n  //       .then((response) => {\r\n  //         console.log(response.data);\r\n  //         setRecentPhotos(response.data);\r\n  //       })\r\n  //       .catch(function (error) {\r\n  //         console.log(error);\r\n  //       });\r\n  //   }, []);\r\n\r\n  const handleEmailInput = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const handleUsernameInput = (e) => {\r\n    setUsername(e.target.value);\r\n  };\r\n  const handlePasswordInput = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n  const handlePasswordConfirmInput = (e) => {\r\n    setPasswordConfirm(e.target.value);\r\n  };\r\n  const handleSignUp = () => {\r\n    if (password !== passwordConfirm) {\r\n      alert(\"Passwords do not match!\");\r\n      return;\r\n    }\r\n    const details = { email, password, passwordConfirm };\r\n    // console.log(details);\r\n    console.log(\"Signing up...\", email, password);\r\n    // axios\r\n    //   .post(\"http://localhost:5000/signup\", details)\r\n    //   .then(function (response) {\r\n    //     console.log(response.data);\r\n    //   })\r\n    //   .catch(function (error) {\r\n    //     console.log(error);\r\n    //   });\r\n  };\r\n\r\n  const signUp = () => {\r\n    auth\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then((res) => {\r\n        return auth.currentUser.updateProfile({\r\n          displayName: username,\r\n        });\r\n      })\r\n      .then(function () {\r\n        console.log(\"Logged in...\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        //   key={photo._id}\r\n        style={{ width: \"100%\" }}\r\n        // className={ImageStyles.card}\r\n        className=\"my-5\"\r\n      >\r\n        <Card.Header>\r\n          <span className=\"text-center\">Sign Up</span>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Form className=\"mx-auto mb-3\" style={{ width: \"80%\" }}>\r\n            <Form.Group controlId=\"formEmail\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                defaultValue={email}\r\n                onChange={handleEmailInput}\r\n                type=\"email\"\r\n                placeholder=\"Enter email\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formUsername\">\r\n              <Form.Label>Username</Form.Label>\r\n              <Form.Control\r\n                defaultValue={username}\r\n                onChange={handleUsernameInput}\r\n                type=\"username\"\r\n                placeholder=\"Enter username\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formPassword\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                defaultValue={password}\r\n                onChange={handlePasswordInput}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formPasswordConfirm\">\r\n              <Form.Label>Confirm Password</Form.Label>\r\n              <Form.Control\r\n                defaultValue={passwordConfirm}\r\n                onChange={handlePasswordConfirmInput}\r\n                type=\"password\"\r\n                placeholder=\"Confirm your password\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Button\r\n              variant=\"primary\"\r\n              type=\"button\"\r\n              className=\"w-100\"\r\n              onClick={signUp}\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form>{\" \"}\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport { auth, firestore } from \"../firebase\";\r\n\r\nimport { Card, Button, Form } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst SignIn = () => {\r\n  let history = useHistory();\r\n\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n\r\n  const handleEmailInput = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const handlePasswordInput = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n  const handleSignIn = () => {\r\n    console.log(\"Signing in...\", email, password);\r\n  };\r\n\r\n  const signIn = () => {\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(function () {\r\n        console.log(\"Logged in...\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch(function (error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        console.log(error);\r\n        // ...\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        //   key={photo._id}\r\n        style={{ width: \"100%\" }}\r\n        // className={ImageStyles.card}\r\n        className=\"my-5\"\r\n      >\r\n        <Card.Header>\r\n          <span className=\"text-center\">Sign In</span>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Form\r\n            className=\"mx-auto mb-3\"\r\n            style={{ width: \"80%\" }}\r\n            onSubmit={signIn}\r\n            id=\"signInForm\"\r\n          >\r\n            <Form.Group controlId=\"formEmail\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                defaultValue={email}\r\n                onChange={handleEmailInput}\r\n                type=\"email\"\r\n                placeholder=\"Enter email\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formPassword\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                defaultValue={password}\r\n                onChange={handlePasswordInput}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Button\r\n              variant=\"primary\"\r\n              type=\"button\"\r\n              className=\"w-100\"\r\n              onClick={signIn}\r\n              form=\"signInForm\"\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form>{\" \"}\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport SignUp from \"./components/SignUp\";\r\nimport SignIn from \"./components/SignIn\";\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\nimport { auth, firestore } from \"./firebase\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n} from \"react-router-dom\";\r\n\r\nconst Account = () => {\r\n  auth.onAuthStateChanged(function (user) {\r\n    if (user) {\r\n      console.log(\"User currently logged in\", user);\r\n    } else {\r\n      console.log(\"Not logged in\");\r\n    }\r\n  });\r\n\r\n  const [method, setMethod] = useState(true);\r\n\r\n  return (\r\n    <Layout customWidth={10}>\r\n      <Container>\r\n        <Row>\r\n          <Col xs={12} md={8} lg={5} className=\"mx-auto\">\r\n            {method ? <SignIn /> : <SignUp />}\r\n            <p className=\"text-center\">\r\n              Click{\" \"}\r\n              <Link\r\n                to=\"#\"\r\n                onClick={() => {\r\n                  setMethod(!method);\r\n                }}\r\n              >\r\n                here\r\n              </Link>{\" \"}\r\n              to {method ? \"sign up\" : \"sign in\"}\r\n            </p>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n      <Row />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n","import React, { useRef, useContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageControls from \"./ImageControls\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { UserContext } from \"../Context\";\r\nimport { format, render, cancel, register } from \"timeago.js\";\r\nimport CommentBox from \"./CommentBox\";\r\n\r\nconst ImageDetailedBox = (props) => {\r\n  let setSrc = props.data ? props.data : require(\"./1.jpg\");\r\n  console.log(\"!!!\", props.data);\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n\r\n  let history = useHistory();\r\n  const [state, setState] = useContext(UserContext);\r\n  const [commentsArray, setCommentsArray] = useState(props.data.comments || []);\r\n\r\n  const commentRef = useRef();\r\n\r\n  useEffect(() => {\r\n    console.log(commentsArray);\r\n  }, [commentsArray]);\r\n\r\n  const handleComment = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    if (!commentRef.current.value) return;\r\n    console.log(\"Posting\", state);\r\n    console.log(commentRef.current.value);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"comment\",\r\n        commentValue: commentRef.current.value,\r\n        fileName: props.data.fileName,\r\n        currentUser: state.user,\r\n      })\r\n      .then((response) => {\r\n        commentRef.current.value = \"\";\r\n        console.log(response.data);\r\n        setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          // minWidth: \"60%\"\r\n          flex: 1,\r\n        }}\r\n      >\r\n        <img\r\n          // src={require(\"./1.jpg\")}\r\n          src={aws + props.data.fileName}\r\n          style={{\r\n            maxHeight: 600,\r\n            objectFit: \"cover\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n          }}\r\n        ></img>{\" \"}\r\n      </div>\r\n      <>\r\n        <div\r\n          className=\"d-flex flex-column\"\r\n          style={{\r\n            backgroundColor: \"white\",\r\n            // border: \"1px solid rgba(0,0,0,0.3)\",\r\n            // minWidth: 250,\r\n            // flex: 1,\r\n            // height: \"100%\",\r\n            // overflowY: \"auto\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              borderBottom: \"1px solid rgba(0,0,0,0.1)\",\r\n              padding: \"0.8em\",\r\n            }}\r\n          >\r\n            <ImageHeader\r\n              author={props.data.author}\r\n              fileName={props.data.fileName}\r\n            />\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              borderBottom: \"1px solid rgba(0,0,0,0.1)\",\r\n              //   padding: \"0.8em\",\r\n              height: \"75%\",\r\n              overflowY: \"auto\",\r\n            }}\r\n          >\r\n            <div>\r\n              {props?.data?.caption && (\r\n                <ImageHeader\r\n                  author={props.data.author}\r\n                  comment={props.data.caption}\r\n                  commentTime={props.data.uploadTime}\r\n                  caption={1}\r\n                />\r\n              )}\r\n              {commentsArray?.length ? (\r\n                commentsArray?.map((comment) => (\r\n                  <ImageHeader\r\n                    author={comment.user}\r\n                    comment={comment.comment}\r\n                    commentTime={comment.commentTime}\r\n                    fileName={props.data.fileName}\r\n                    deleteComment={1}\r\n                    setCommentsArray={(newComments) => {\r\n                      console.log(\"sca\");\r\n                      setCommentsArray(newComments);\r\n                    }}\r\n                  />\r\n                ))\r\n              ) : (\r\n                <span className=\"p-2\"></span>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div\r\n            style={{\r\n              padding: \"0.8em\",\r\n            }}\r\n          >\r\n            <ImageControls data={props.data} />\r\n\r\n            <span style={{ fontSize: 10 }}>\r\n              <Link to={`/p/${props.data.fileName}`} style={{ color: \"gray\" }}>\r\n                {format(props.data.uploadTime).toUpperCase()}\r\n              </Link>\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <CommentBox\r\n              data={props.data}\r\n              commentsArray={commentsArray}\r\n              setCommentsArray={setCommentsArray}\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageDetailedBox;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport { Card, Button, Form, Modal } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageDetailedBox from \"./ImageDetailedBox\";\r\nimport { ModalContext } from \"../Context\";\r\n\r\nconst ImageModal = (props) => {\r\n  const browserNarrowWidth = window.outerWidth;\r\n  const [modalShow, setModalShow] = useContext(ModalContext);\r\n\r\n  console.log(modalShow);\r\n  // console.log(\"sasasas\", props);\r\n  const [show, setShow] = useState(props.show);\r\n\r\n  //   const handleClose = () => setShow(false);\r\n  //   const handleShow = () => setShow(true);\r\n\r\n  return (\r\n    <div style={{ borderRadius: \"0\" }}>\r\n      <Modal\r\n        show={props.show}\r\n        onHide={props.handleClose}\r\n        dialogClassName=\"modal-90w\"\r\n        // style={{ width: \"90%\" }}\r\n      >\r\n        <Modal.Body\r\n          className={`d-flex ${\r\n            browserNarrowWidth <= 1024 ? \"flex-column\" : \"flex-row\"\r\n          }`}\r\n          style={{\r\n            padding: 0,\r\n            borderRadius: 0,\r\n          }}\r\n        >\r\n          <ImageDetailedBox data={props.data} />\r\n        </Modal.Body>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageModal;\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { auth, firestore } from \"../firebase\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\n\r\nimport Layout from \"../Layout\";\r\nimport { UserContext } from \"../Context\";\r\n\r\nconst Uploader = ({ type }) => {\r\n  const [state, setState] = useContext(UserContext);\r\n  let history = useHistory();\r\n  const captionRef = useRef(null);\r\n\r\n  // console.log(\"up\");\r\n  const data = { hello: \"here it is\" };\r\n  const [acceptableFile, setAcceptableFile] = useState();\r\n  const [file, setFile] = useState();\r\n  const [loaded, setLoaded] = useState();\r\n  const [recentFile, setRecentFile] = useState();\r\n\r\n  const upload = async (e) => {\r\n    e.preventDefault();\r\n    console.log(e.target.files);\r\n    if (e?.target?.files[0]?.type?.slice(0, 5) !== \"image\") {\r\n      setAcceptableFile(0);\r\n      alert(\"File type unsupported - please only upload images\");\r\n      return;\r\n    } else {\r\n      console.log(window.URL.createObjectURL(e.target.files[0]));\r\n      setLoaded(window.URL.createObjectURL(e.target.files[0]));\r\n\r\n      setAcceptableFile(1);\r\n    }\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    // console.log(window.URL.createObjectURL(croppedImage));\r\n\r\n    // console.log(\"uppp\");\r\n    console.log(croppedImage);\r\n\r\n    if (croppedImage.size > 400000) {\r\n      alert(\"File too large - please select images under 400kb\");\r\n      return;\r\n    }\r\n\r\n    var data = new FormData();\r\n    data.append(\"imageUpload\", croppedImage);\r\n    if (!type) {\r\n      data.append(\"caption\", captionRef.current.value);\r\n      data.append(\"authorName\", state.user);\r\n    }\r\n    if (type) {\r\n      data.append(\"type\", type);\r\n      data.append(\"username\", state.user);\r\n    }\r\n    // let postUrl = type\r\n    //   ? \"http://localhost:5000/profilePhoto\"\r\n    //   : \"http://localhost:5000/api\";\r\n\r\n    axios\r\n      .post(\"/api\", data, {\r\n        headers: {\r\n          encType: \"multipart/form-data\",\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n        },\r\n      })\r\n      .then((response) => {\r\n        console.log(response);\r\n        if (type) {\r\n          alert(\"Profile photo will take around a minute to update\");\r\n        }\r\n        if (\"error\" in response?.data) {\r\n          alert(response.data.error);\r\n          if (!type) history.push(\"/\");\r\n          return;\r\n        }\r\n        if (\"success\" in response?.data && !type) {\r\n          setTimeout(() => {\r\n            setLoaded(response.data.location);\r\n            alert(\"Image uploaded!\");\r\n            if (!type) history.push(\"/\");\r\n          }, 1000);\r\n        }\r\n      })\r\n\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  //   useEffect(() => {\r\n  //     if (loaded) {\r\n  //       setRecentFile(loaded);\r\n  //     }\r\n  //   }, [loaded]);\r\n\r\n  //Image crop functions start\r\n  const [crop, setCrop] = useState({\r\n    unit: \"px\", // default, can be 'px' or '%'\r\n    x: 130,\r\n    y: 50,\r\n    width: 50,\r\n    height: 50,\r\n    aspect: 1 / 1,\r\n    maxHeight: 1200,\r\n    maxWidth: 1200,\r\n    minHeight: 500,\r\n    minHeight: 500,\r\n  });\r\n\r\n  const [completedCrop, setCompletedCrop] = useState(null);\r\n  const [imageRef, setImageRef] = useState(null);\r\n  const [croppedImage, setCroppedImage] = useState(null);\r\n  const [croppedImageURL, setCroppedImageURL] = useState(null);\r\n\r\n  const onImageLoaded = (image) => {\r\n    setImageRef(image);\r\n    // setCroppedImage(image);\r\n  };\r\n\r\n  const onCropChange = (crop) => {\r\n    console.log(\"Changed!\");\r\n    setCrop(crop);\r\n  };\r\n\r\n  const onCropComplete = (crop) => {\r\n    if (imageRef && crop.width && crop.height) {\r\n      const croppedImageUrl = getCroppedImg(imageRef, crop);\r\n      setCroppedImageURL(croppedImageUrl);\r\n    }\r\n  };\r\n\r\n  const getCroppedImg = (image, crop) => {\r\n    const canvas = document.createElement(\"canvas\");\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    canvas.width = crop.width;\r\n    canvas.height = crop.height;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX * 2,\r\n      crop.height * scaleY * 2,\r\n      0,\r\n      0,\r\n      crop.width * 2,\r\n      crop.height * 2\r\n    );\r\n\r\n    const reader = new FileReader();\r\n    canvas.toBlob((blob) => {\r\n      console.log(blob);\r\n      setCroppedImage(blob);\r\n    });\r\n  };\r\n\r\n  //Image crop functions end\r\n\r\n  return (\r\n    <>\r\n      <div className=\"col text-center\">\r\n        <p>{croppedImage && `Image preview: ${croppedImage.size / 1000} kb`}</p>\r\n\r\n        {loaded && (\r\n          <>\r\n            {/* <img style={{ width: 400 }} src={loaded}></img> */}\r\n            <ReactCrop\r\n              crop={crop}\r\n              src={loaded}\r\n              onImageLoaded={onImageLoaded}\r\n              onComplete={onCropComplete}\r\n              onChange={onCropChange}\r\n            />\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"col text-center\">\r\n        {state.user ? (\r\n          <>\r\n            <form\r\n              method=\"post\"\r\n              // action=\"http://localhost:5000/api\"\r\n              encType=\"multipart/form-data\"\r\n              id=\"#\"\r\n              onSubmit={handleUpload}\r\n            >\r\n              <div className=\"form-group files\">\r\n                <label>Upload Your File (max: 400kb)</label>\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"form-control\"\r\n                  name=\"file\"\r\n                  multiple=\"\"\r\n                  onChange={upload}\r\n                  accept=\"image/*\"\r\n                ></input>\r\n              </div>\r\n              {!type && (\r\n                <textarea\r\n                  style={{ width: \"100%\" }}\r\n                  ref={captionRef}\r\n                  placeholder=\"Enter a caption...\"\r\n                ></textarea>\r\n              )}\r\n              {acceptableFile && croppedImage ? (\r\n                <button className=\"btn btn-success my-2\">Upload</button>\r\n              ) : (\r\n                <button className=\"btn btn-success\" disabled>\r\n                  Upload\r\n                </button>\r\n              )}\r\n            </form>\r\n          </>\r\n        ) : (\r\n          \"You must log in first!\"\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Uploader;\r\n","import React, { useEffect, useState, useContext, useRef } from \"react\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport { Card, Button, Form, Modal } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageDetailedBox from \"./ImageDetailedBox\";\r\nimport Uploader from \"./Uploader\";\r\nimport { ModalContext } from \"../Context\";\r\nimport { UserContext } from \"../Context\";\r\n\r\nconst EditProfileModal = (props) => {\r\n  let history = useHistory();\r\n  const [state, setState] = useContext(UserContext);\r\n  const bioRef = useRef(null);\r\n\r\n  const browserNarrowWidth = window.outerWidth;\r\n  const [modalShow, setModalShow] = useContext(ModalContext);\r\n\r\n  console.log(modalShow);\r\n  console.log(\"XZXXZXZXZ\", state.user);\r\n  // console.log(\"sasasas\", props);\r\n  const [show, setShow] = useState(props.show);\r\n  const [profilePhotoChanged, setProfilePhotoChanged] = useState();\r\n\r\n  //   const handleClose = () => setShow(false);\r\n  //   const handleShow = () => setShow(true);\r\n\r\n  const updateProfile = () => {\r\n    let data = {\r\n      username: state.user,\r\n      bio: bioRef.current.value,\r\n    };\r\n    // if (profilePhotoChanged) {\r\n    //   data.photo = `https://pixelshare.s3.amazonaws.com/${state.user}`;\r\n    // }\r\n\r\n    axios\r\n      .post(\"/updateProfile\", data)\r\n      .then((response) => {\r\n        // console.log(\"epm\", response.data);\r\n        console.log(\"epm\", response.data);\r\n        props.setProfileData(response.data.value);\r\n        props.handleProfileModalClose();\r\n        history.go(0);\r\n      })\r\n\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div style={{ borderRadius: \"0\" }}>\r\n      <Modal\r\n        show={props.show}\r\n        onHide={() => {\r\n          props.handleProfileModalClose();\r\n        }}\r\n        dialogClassName=\"modal-90w\"\r\n        // style={{ width: \"90%\" }}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Edit Profile</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form className=\"mx-auto mb-3\" style={{ width: \"80%\" }}>\r\n            <Form.Group>\r\n              <Uploader\r\n                type=\"profilePhoto\"\r\n                setProfilePhotoChanged={(a) => {\r\n                  setProfilePhotoChanged(a);\r\n                }}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group controlId=\"formEmail\">\r\n              <Form.Label for=\"bioText\">Profile Bio</Form.Label>\r\n              <textarea\r\n                // defaultValue={bio}\r\n                // onChange={handleBioInput}\r\n                placeholder=\"Enter a bio\"\r\n                className=\"form-control\"\r\n                id=\"bioText\"\r\n                rows=\"3\"\r\n                ref={bioRef}\r\n              />\r\n            </Form.Group>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\">Close</Button>\r\n          <Button variant=\"primary\" onClick={updateProfile}>\r\n            Save changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfileModal;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap/\";\r\n\r\nimport Layout from \"./Layout\";\r\nimport Image from \"./components/Image\";\r\nimport ImageModal from \"./components/ImageModal\";\r\nimport EditProfileModal from \"./components/EditProfileModal\";\r\nimport Loader from \"./components/Loader\";\r\nimport { UserContext } from \"./Context\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\n\r\nconst UserPage = ({ match }) => {\r\n  let history = useHistory();\r\n  const browserWidth = window.outerWidth;\r\n  const {\r\n    params: { userID },\r\n  } = match;\r\n\r\n  // const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  const [profileData, setProfileData] = useState();\r\n  const [recentPhotos, setRecentPhotos] = useState();\r\n  const [show, setShow] = useState(false);\r\n  const [data, setData] = useState();\r\n\r\n  const [profileModalShow, setProfileModalShow] = useState(false);\r\n  // const recentPhotos = [\"../img/1.jpg\"];\r\n  // console.log(\"rrr\", useContext(UserContext));\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(`/photos/`, {\r\n        queryType: \"user\",\r\n        author: userID,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setRecentPhotos(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    axios\r\n      .post(`/profile/`, {\r\n        // queryType: \"user\",\r\n        username: userID,\r\n      })\r\n      .then((response) => {\r\n        console.log(response);\r\n        setProfileData(response.data[0]);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (data) setShow(1);\r\n  }, [data]);\r\n\r\n  const [state, setState] = useContext(UserContext);\r\n\r\n  const openProfileModal = () => {\r\n    console.log(\"Opening profile modal\");\r\n  };\r\n\r\n  return (\r\n    <Layout pageTitle={userID}>\r\n      {/* <p>Hello, {state.user}</p> */}\r\n      <EditProfileModal\r\n        show={profileModalShow}\r\n        handleProfileModalClose={() => setProfileModalShow(false)}\r\n        handleProfileModalShow={() => setProfileModalShow(true)}\r\n        setProfileData={(data) => setProfileData(data)}\r\n      />\r\n      {data && (\r\n        <ImageModal\r\n          show={show}\r\n          handleClose={() => setShow(false)}\r\n          handleShow={() => setShow(true)}\r\n          data={data}\r\n        />\r\n      )}\r\n      <Container>\r\n        <Row\r\n          className=\"mb-5\"\r\n          style={\r\n            {\r\n              // margin: \"0 auto\", width: \"60%\"\r\n            }\r\n          }\r\n        >\r\n          <Col xs={3} className=\"mx-auto mt-5\">\r\n            <img\r\n              src={`https://pixelshare.s3.amazonaws.com/${userID}`}\r\n              alt=\"User's profile photo\"\r\n              className=\"rounded-circle\"\r\n              style={{ height: \"80px\", width: \"80px\" }}\r\n            ></img>\r\n          </Col>\r\n          <Col xs={9} className=\"mt-5\">\r\n            <div className=\"d-flex align-items-center mb-2\">\r\n              <p style={{ fontSize: \"28px\", margin: 0 }}>{userID}</p>\r\n              {userID?.toLowerCase() == state?.user?.toLowerCase() && (\r\n                <Button\r\n                  variant=\"outline-secondary ml-3\"\r\n                  size=\"sm\"\r\n                  onClick={() => setProfileModalShow(true)}\r\n                >\r\n                  Edit profile\r\n                </Button>\r\n              )}\r\n            </div>\r\n            <span className=\"mr-2\">\r\n              <strong>{recentPhotos ? recentPhotos?.length : \"Loading\"}</strong>{\" \"}\r\n              posts\r\n            </span>\r\n\r\n            <p className=\"mt-2\">{profileData && profileData.bio}</p>\r\n          </Col>\r\n        </Row>\r\n        <Row></Row>\r\n        <Row\r\n          style={\r\n            {\r\n              // width: \"80%\", margin: \"0 auto\"\r\n            }\r\n          }\r\n        >\r\n          <div class=\"grid-container\">\r\n            {/* <Col xs={12} style={{ width: \"80%\", margin: \"0 auto\" }}> */}\r\n            {recentPhotos ? (\r\n              recentPhotos?.map((photo, i) => (\r\n                <>\r\n                  {/* <Col xs={4} className=\"mb-4\"> */}\r\n                  <div>\r\n                    <img\r\n                      onClick={() => {\r\n                        if (browserWidth < 768) {\r\n                          history.push(`/p/${photo.fileName}`);\r\n                        }\r\n                        // setShow(1);\r\n                        setData(recentPhotos[i]);\r\n                        console.log(\"Hi\");\r\n                      }}\r\n                      className=\" img-responsive full-width \"\r\n                      src={`https://pixelshare.s3.amazonaws.com/${photo.fileName}`}\r\n                      alt={`Photo uploaded by ${photo.author}`}\r\n                      style={{\r\n                        width: \"100%\",\r\n                        // height: \"260px\",\r\n                        objectFit: \"cover\",\r\n                        maxWidth: 200,\r\n                      }}\r\n                    ></img>\r\n                  </div>\r\n                  {/* </Col> */}\r\n                </>\r\n              ))\r\n            ) : (\r\n              <div style={{ position: \"absolute\", left: \"25%\", right: \"25%\" }}>\r\n                <Loader />\r\n              </div>\r\n            )}\r\n          </div>\r\n          {/* </Col> */}\r\n        </Row>\r\n      </Container>\r\n      <Row />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default React.memo(UserPage);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport Layout from \"./Layout\";\r\nimport Image from \"./components/Image\";\r\nimport Loader from \"./components/Loader\";\r\nimport ImageModal from \"./components/ImageModal\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\nimport ImageDetailedBox from \"./components/ImageDetailedBox\";\r\n\r\nconst PhotoPage = ({ match }) => {\r\n  const {\r\n    params: { fileName },\r\n  } = match;\r\n\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  const [photo, setPhoto] = useState();\r\n  const [show, setShow] = useState(false);\r\n  // const recentPhotos = [\"../img/1.jpg\"];\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\"/photos/\", { queryType: \"single\", fileName })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setPhoto(response.data[0]);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <Layout customWidth=\"8\">\r\n      <Container>\r\n        <Row>\r\n          <Col className=\"mt-5\">\r\n            <div\r\n              className=\"d-flex flex-column flex-md-row mb-3\"\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                justifyContent: \"center\",\r\n                padding: 0,\r\n                borderRadius: 0,\r\n                width: \"100%\",\r\n                margin: \"0 auto\",\r\n                border: \"1px solid rgba(0,0,0,0.1)\",\r\n              }}\r\n            >\r\n              {photo ? <ImageDetailedBox data={photo} /> : <Loader />}\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n      <Row />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default PhotoPage;\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport Layout from \"./Layout\";\r\nimport Uploader from \"./components/Uploader\";\r\n\r\nconst Upload = () => {\r\n  return (\r\n    <Layout pageTitle=\"Upload\">\r\n      <div>\r\n        <div className=\"container mt-5 pt-1\">\r\n          <div className=\"\">\r\n            <Uploader />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n","import React, { useState } from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport \"./App.css\";\r\n\r\nimport Layout from \"./Layout\";\r\n\r\nimport Home from \"./Home\";\r\nimport Account from \"./Account\";\r\nimport UserPage from \"./UserPage\";\r\nimport PhotoPage from \"./PhotoPage\";\r\nimport Upload from \"./Upload\";\r\nimport Image from \"./components/Image\";\r\nimport { UserContext } from \"./Context\";\r\nimport { ModalContext } from \"./Context\";\r\n\r\nfunction App() {\r\n  const [state, setState] = useState({ user: null });\r\n  const [modalShow, setModalShow] = useState(true);\r\n\r\n  return (\r\n    <div>\r\n      <UserContext.Provider value={[state, setState]}>\r\n        <ModalContext.Provider value={[modalShow, setModalShow]}>\r\n          <Router>\r\n            <Route path=\"/\" exact component={Home} />\r\n            <Route path=\"/upload\" exact component={Upload} />\r\n            <Route path=\"/login\" exact component={Account} />\r\n            <Route path=\"/signup\" exact component={Account} />\r\n            <Route path=\"/user/:userID\" component={UserPage} />\r\n            <Route path=\"/p/:fileName\" component={PhotoPage} />\r\n          </Router>\r\n        </ModalContext.Provider>\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"image_card__wyPX5\",\"username\":\"image_username__ji5El\",\"profilePhoto\":\"image_profilePhoto__1R2ei\"};","module.exports = __webpack_public_path__ + \"static/media/trash.740028d4.svg\";"],"sourceRoot":""}