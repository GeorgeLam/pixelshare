(this.webpackJsonppixelshare=this.webpackJsonppixelshare||[]).push([[0],{120:function(e,t,a){e.exports=a.p+"static/media/1.a282b009.jpg"},122:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(24),c=a.n(o),r=(a(86),a(4)),s=a(7),i=a(9),m=(a(87),a(47)),u=a.n(m);a(88),a(90);u.a.initializeApp({apiKey:"AIzaSyA7f27Iu24JjQOd7wp4hK-VzGwYah0nsTo",authDomain:"pixelshare-dee1b.firebaseapp.com",databaseURL:"https://pixelshare-dee1b.firebaseio.com",projectId:"pixelshare-dee1b",storageBucket:"pixelshare-dee1b.appspot.com",messagingSenderId:"179184967306",appId:"1:179184967306:web:8008f9f3c1fc2ac0931773",measurementId:"G-FMBPRG8J4X"});var d=u.a.auth(),p=l.a.createContext(),h=l.a.createContext(!1),f=(a(93),a(129)),E=a(124),g=a(125),b=a(128),v=a(71),j=function(e){var t=e.children,a=e.customWidth,o=Object(i.e)(),c=Object(n.useState)(null),m=Object(r.a)(c,2),u=m[0],h=m[1],j=Object(n.useContext)(p),y=Object(r.a)(j,2),O=(y[0],y[1]);d.onAuthStateChanged((function(e){e?h(e):console.log("Not logged in")})),Object(n.useEffect)((function(){(null===u||void 0===u?void 0:u.displayName)?(O((function(e){return{user:u.displayName}})),console.log("effect")):(console.log("effect2"),O((function(e){return{user:null}})))}),[u]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{bg:"light",expand:"lg",fixed:"top"},l.a.createElement(E.a,{style:{width:"70%"}},l.a.createElement(g.a,null,l.a.createElement(f.a.Brand,{href:"/"},"Pixelshare")),l.a.createElement(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(g.a,null,l.a.createElement(f.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(b.a,{className:"mr-auto"},l.a.createElement(g.a,null,l.a.createElement(s.c,{to:"/",exact:!0,className:"mr-3",activeClassName:"mr-3 font-weight-bold"},"Home"),l.a.createElement(s.c,{to:"/upload",className:"mr-3",activeClassName:"mr-3 font-weight-bold"},"Upload"),u&&l.a.createElement(s.c,{to:"/user/".concat(null===u||void 0===u?void 0:u.displayName),className:"mr-3",activeClassName:"mr-3 font-weight-bold"},null===u||void 0===u?void 0:u.displayName),u?l.a.createElement(s.b,{to:"#",onClick:function(){d.signOut().then((function(){h(null),console.log("You were logged out..."),o.push("/")})).catch((function(e){console.log(e)}))}},"Log out"):l.a.createElement(s.c,{to:"/login",activeClassName:"mr-3 font-weight-bold"},"Login"))))))),l.a.createElement("div",{style:{display:"flex",flexDirection:"column",minHeight:"calc(100vh - 22px)"}},l.a.createElement("div",{style:{flex:1}},l.a.createElement(g.a,{className:"h-100"},l.a.createElement(v.a,{xs:12,md:11,lg:a||5,className:"mt-5 mx-auto"},t))),l.a.createElement(f.a,{bg:"light"},l.a.createElement(E.a,null,l.a.createElement(g.a,{className:"mx-auto"},l.a.createElement(v.a,null,l.a.createElement("a",{href:"https://georgelam.dev"},"George Lam")," - 2020"))))))},y=a(8),O=a.n(y),w=a(28),x=a(32),N=a(26),C=a.n(N),S=function(e){console.log(e.fileName);var t=Object(i.e)(),o=Object(n.useContext)(p),c=Object(r.a)(o,2),m=c[0];c[1];console.log(m.user),console.log(e);return l.a.createElement("div",{className:"d-flex flex-row ".concat(e.comment&&"mb-3 px-3 py-2")},l.a.createElement("div",{style:{flex:1,display:"flex"}},l.a.createElement(s.b,{to:"/user/".concat(e.author)},l.a.createElement("img",{src:"https://pixelshare.s3.amazonaws.com/".concat(e.author),className:"rounded-circle mr-3 profilePhoto",alt:"user's profile picture",width:"30",height:"30"})),l.a.createElement("div",{className:"d-flex flex-column",style:{fontSize:e.comment?"0.8em":"1em"}},l.a.createElement(s.b,{to:"/user/".concat(e.author),className:C.a.username,style:{color:"black",textDecoration:"none"}},e.author),e.comment&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",null,e.comment),l.a.createElement("span",{style:{fontSize:10,color:"gray"}},Object(w.a)(e.commentTime).toUpperCase())))),l.a.createElement("div",null,e.author==m.user&&e.comment&&!e.caption&&l.a.createElement("span",{onClick:function(){var t,a;window.confirm("Confirm comment deletion?")&&(t=e.commentTime,a=e.author,console.log("Deleting",t,a),O.a.post("http://localhost:5000/photoUpdate/",{queryType:"commentDelete",fileName:e.fileName,commentTime:t,author:a}).then((function(t){console.log(t.data),e.setCommentsArray(t.data.comments)})).catch((function(e){console.log(e)})))}},l.a.createElement("img",{src:a(65),style:{height:" 30%",cursor:"pointer"}})),e.author==m.user&&!e.comment&&!e.caption&&l.a.createElement("span",{onClick:function(){var a;window.confirm("Confirm photo deletion?")&&(a=e.fileName,console.log("Deleting",a),O.a.post("http://localhost:5000/photoUpdate/",{queryType:"photoDelete",fileName:a}).then((function(e){console.log(e.data),e.data.deletedCount&&(alert("Photo has been deleted!"),t.push("/"))})).catch((function(e){console.log(e)})))}},l.a.createElement("img",{src:a(65),style:{height:" 30%",cursor:"pointer"}}))))},k=function(e){var t,a,o,c,m=Object(i.e)(),u=Object(n.useContext)(p),d=Object(r.a)(u,2),f=d[0],E=(d[1],Object(n.useContext)(h)),g=Object(r.a)(E,2);g[0],g[1];console.log(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.likes)||void 0===a?void 0:a.includes(f.user));var b=Object(n.useState)(e.data.likes||[]),v=Object(r.a)(b,2),j=v[0],y=v[1],w=Object(n.useState)(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(c=o.likes)||void 0===c?void 0:c.includes(f.user)),x=Object(r.a)(w,2),N=x[0],C=x[1],S=Object(n.useRef)();return l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex flex-row",style:{color:"black",fontSize:11}},l.a.createElement(s.b,{to:"#",className:"mr-2",onClick:function(){f.user?(console.log("Liking",f),console.log(S),C(!N),O.a.post("http://localhost:5000/photoUpdate/",{queryType:"like",fileName:e.data.fileName,currentUser:f.user,likeStatus:N}).then((function(e){console.log(e.data),y(e.data.likes)})).catch((function(e){console.log(e)}))):m.push("/login")}},N?l.a.createElement("span",null,"Unlike"):l.a.createElement("span",null,"Like")),l.a.createElement(s.b,{onClick:function(){f.user?m.push("/p/".concat(e.data.fileName)):m.push("/login")}},"Comment")),l.a.createElement("div",null,(null===j||void 0===j?void 0:j.length)?l.a.createElement(l.a.Fragment,null," ",l.a.createElement("span",{ref:S},"Liked by "),j.map((function(e,t){return l.a.createElement(l.a.Fragment,null,t?", ":"",l.a.createElement("strong",null,l.a.createElement(s.b,{style:{color:"black"},to:"/user/".concat(e)},e)))}))):l.a.createElement("span",null)))},P=function(e){var t=Object(i.e)();console.log(e.commentsArray);var a=Object(n.useContext)(p),o=Object(r.a)(a,2),c=o[0],m=(o[1],Object(n.useState)(e.commentsArray||[])),u=Object(r.a)(m,2),d=u[0];u[1];Object(n.useEffect)((function(){console.log(d)}),[d]);var h=Object(n.useRef)();return l.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",borderTop:"1px solid rgba(0,0,0,0.1)"}},l.a.createElement("textarea",{placeholder:"Add a comment...",ref:h,style:{width:"100%",overflow:"auto",border:"none",resize:"none",height:40,padding:"0.4em 0.8em"}}),l.a.createElement(s.b,{to:"#",style:{padding:"0.4em 0.7em"},onClick:function(){c.user?(console.log("Posting",c),console.log(h.current.value),O.a.post("http://localhost:5000/photoUpdate/",{queryType:"comment",commentValue:h.current.value,fileName:e.data.fileName,currentUser:c.user}).then((function(t){console.log(t.data),h.current.value="",e.setCommentsArray(t.data.comments)})).catch((function(e){console.log(e)}))):t.push("/login")}},"Post"))},U=function(e){var t=e.photo;console.log("ajaja",t);var a=Object(n.useState)(t.comments||[]),o=Object(r.a)(a,2),c=o[0],i=o[1];return l.a.createElement(x.a,{key:t._id,style:{width:"100%"},className:"my-5"},l.a.createElement(x.a.Header,null,l.a.createElement(S,{author:t.author,fileName:t.fileName})),l.a.createElement("img",{variant:"top",src:"https://pixelshare.s3.eu-west-2.amazonaws.com/"+t.fileName,alt:"Photo uploaded by ".concat(t.author),style:{maxHeight:500,objectFit:"cover",width:"100%"}}),l.a.createElement(x.a.Body,null,l.a.createElement(k,{data:t}),l.a.createElement(x.a.Text,null,(null===t||void 0===t?void 0:t.caption)&&l.a.createElement("span",null,null===t||void 0===t?void 0:t.caption),l.a.createElement("ul",{style:{margin:0,padding:0}},(null===c||void 0===c?void 0:c.length)>2&&l.a.createElement(s.b,{to:"/p/".concat(null===t||void 0===t?void 0:t.fileName),style:{color:"gray",fontWeight:400}},"See all ",null===c||void 0===c?void 0:c.length," comments"),(null===c||void 0===c?void 0:c.length)?null===c||void 0===c?void 0:c.slice(c.length-2).map((function(e){return l.a.createElement("li",{style:{listStyle:"none"}},l.a.createElement("strong",{className:"mr-1"},l.a.createElement(s.b,{style:{color:"black"},to:"/user/".concat(e.user)},e.user)),e.comment)})):l.a.createElement(l.a.Fragment,null)),l.a.createElement("span",{style:{fontSize:10}},l.a.createElement(s.b,{to:"/p/".concat(t.fileName),style:{color:"gray"}},Object(w.a)(t.uploadTime).toUpperCase())))),l.a.createElement("div",null,l.a.createElement(P,{style:{width:"100%"},data:t,commentsArray:c,setCommentsArray:i})))},L=(a(67),a(73)),T=a.n(L),F=function(){return l.a.createElement("div",{className:"my-5 text-center"},l.a.createElement("div",{className:"mb-2"},"Loading ..."),l.a.createElement("div",null,l.a.createElement("div",{className:"sweet-loading"},l.a.createElement(T.a,{style:{display:"block",margin:"0 auto"},size:150,color:"#123abc",loading:1}))))},I=function(){var e=Object(n.useState)(3),t=Object(r.a)(e,2),a=(t[0],t[1],Object(n.useState)()),o=Object(r.a)(a,2),c=o[0],i=o[1],m=Object(n.useState)([]),u=Object(r.a)(m,2),d=(u[0],u[1],Object(n.useState)("recent")),p=Object(r.a)(d,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){O.a.post("http://localhost:5000/photos",{queryType:h}).then((function(e){console.log(e.data),i(e.data)})).catch((function(e){console.log(e)}))}),[h]),l.a.createElement("div",null,c?l.a.createElement(l.a.Fragment,null,null===c||void 0===c?void 0:c.slice(0,100).map((function(e,t){return l.a.createElement(U,{photo:e})})),l.a.createElement("span",{className:"d-flex justify-content-center mb-3"},l.a.createElement(s.b,{to:"#",onClick:function(){f("moreRecentPhotos")}},"Load more photos..."))):l.a.createElement(l.a.Fragment,null,l.a.createElement(F,null)))},A=function(){return l.a.createElement(j,{customWidth:4},l.a.createElement(E.a,null,l.a.createElement(g.a,null,l.a.createElement(v.a,{xs:12,className:"mx-auto"},l.a.createElement(I,null)))),l.a.createElement(g.a,null))},z=a(127),R=a(119),D=function(){var e=Object(i.e)(),t=Object(n.useState)(),a=Object(r.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(),m=Object(r.a)(s,2),u=m[0],p=m[1],h=Object(n.useState)(),f=Object(r.a)(h,2),E=f[0],g=f[1],b=Object(n.useState)(),v=Object(r.a)(b,2),j=v[0],y=v[1];return l.a.createElement("div",null,l.a.createElement(x.a,{style:{width:"100%"},className:"my-5"},l.a.createElement(x.a.Header,null,l.a.createElement("span",{className:"text-center"},"Sign Up")),l.a.createElement(x.a.Body,null,l.a.createElement(z.a,{className:"mx-auto mb-3",style:{width:"80%"}},l.a.createElement(z.a.Group,{controlId:"formEmail"},l.a.createElement(z.a.Label,null,"Email"),l.a.createElement(z.a.Control,{defaultValue:o,onChange:function(e){c(e.target.value)},type:"email",placeholder:"Enter email"})),l.a.createElement(z.a.Group,{controlId:"formUsername"},l.a.createElement(z.a.Label,null,"Username"),l.a.createElement(z.a.Control,{defaultValue:u,onChange:function(e){p(e.target.value)},type:"username",placeholder:"Enter username"})),l.a.createElement(z.a.Group,{controlId:"formPassword"},l.a.createElement(z.a.Label,null,"Password"),l.a.createElement(z.a.Control,{defaultValue:E,onChange:function(e){g(e.target.value)},type:"password",placeholder:"Password"})),l.a.createElement(z.a.Group,{controlId:"formPasswordConfirm"},l.a.createElement(z.a.Label,null,"Confirm Password"),l.a.createElement(z.a.Control,{defaultValue:j,onChange:function(e){y(e.target.value)},type:"password",placeholder:"Confirm your password"})),l.a.createElement(R.a,{variant:"primary",type:"button",className:"w-100",onClick:function(){d.createUserWithEmailAndPassword(o,E).then((function(e){return d.currentUser.updateProfile({displayName:u})})).then((function(){console.log("Logged in..."),e.push("/")})).catch((function(e){console.log(e)}))}},"Submit"))," ")))},B=function(){var e=Object(i.e)(),t=Object(n.useState)(),a=Object(r.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(),m=Object(r.a)(s,2),u=m[0],p=m[1],h=function(){d.signInWithEmailAndPassword(o,u).then((function(){console.log("Logged in..."),e.push("/")})).catch((function(e){e.code,e.message;console.log(e)}))};return l.a.createElement("div",null,l.a.createElement(x.a,{style:{width:"100%"},className:"my-5"},l.a.createElement(x.a.Header,null,l.a.createElement("span",{className:"text-center"},"Sign In")),l.a.createElement(x.a.Body,null,l.a.createElement(z.a,{className:"mx-auto mb-3",style:{width:"80%"},onSubmit:h,id:"signInForm"},l.a.createElement(z.a.Group,{controlId:"formEmail"},l.a.createElement(z.a.Label,null,"Email"),l.a.createElement(z.a.Control,{defaultValue:o,onChange:function(e){c(e.target.value)},type:"email",placeholder:"Enter email"})),l.a.createElement(z.a.Group,{controlId:"formPassword"},l.a.createElement(z.a.Label,null,"Password"),l.a.createElement(z.a.Control,{defaultValue:u,onChange:function(e){p(e.target.value)},type:"password",placeholder:"Password"})),l.a.createElement(R.a,{variant:"primary",type:"button",className:"w-100",onClick:h,form:"signInForm"},"Submit"))," ")))},H=function(){d.onAuthStateChanged((function(e){e?console.log("User currently logged in",e):console.log("Not logged in")}));var e=Object(n.useState)(!0),t=Object(r.a)(e,2),a=t[0],o=t[1];return l.a.createElement(j,{customWidth:10},l.a.createElement(E.a,null,l.a.createElement(g.a,null,l.a.createElement(v.a,{xs:12,md:8,lg:5,className:"mx-auto"},a?l.a.createElement(B,null):l.a.createElement(D,null),l.a.createElement("p",{className:"text-center"},"Click"," ",l.a.createElement(s.b,{to:"#",onClick:function(){o(!a)}},"here")," ","to ",a?"sign up":"sign in")))),l.a.createElement(g.a,null))},W=a(126),G=function(e){var t;e.data?e.data:a(120);console.log("!!!",e.data);Object(i.e)();var o=Object(n.useContext)(p),c=Object(r.a)(o,2),m=(c[0],c[1],Object(n.useState)(e.data.comments||[])),u=Object(r.a)(m,2),d=u[0],h=u[1];Object(n.useRef)();Object(n.useEffect)((function(){console.log(d)}),[d]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{flex:1}},l.a.createElement("img",{src:"https://pixelshare.s3.eu-west-2.amazonaws.com/"+e.data.fileName,style:{maxHeight:600,objectFit:"cover",width:"100%",height:"100%"}})," "),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex flex-column",style:{backgroundColor:"white"}},l.a.createElement("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.1)",padding:"0.8em"}},l.a.createElement(S,{author:e.data.author,fileName:e.data.fileName})),l.a.createElement("div",{style:{borderBottom:"1px solid rgba(0,0,0,0.1)",height:"75%",overflowY:"auto"}},l.a.createElement("div",null,(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.caption)&&l.a.createElement(S,{author:e.data.author,comment:e.data.caption,commentTime:e.data.uploadTime,caption:1}),(null===d||void 0===d?void 0:d.length)?null===d||void 0===d?void 0:d.map((function(t){return l.a.createElement(S,{author:t.user,comment:t.comment,commentTime:t.commentTime,fileName:e.data.fileName,deleteComment:1,setCommentsArray:function(e){console.log("sca"),h(e)}})})):l.a.createElement("span",{className:"p-2"}))),l.a.createElement("div",{style:{padding:"0.8em"}},l.a.createElement(k,{data:e.data}),l.a.createElement("span",{style:{fontSize:10}},l.a.createElement(s.b,{to:"/p/".concat(e.data.fileName),style:{color:"gray"}},Object(w.a)(e.data.uploadTime).toUpperCase()))),l.a.createElement("div",null,l.a.createElement(P,{data:e.data,commentsArray:d,setCommentsArray:h})))))},_=function(e){var t=window.outerWidth,a=Object(n.useContext)(h),o=Object(r.a)(a,2),c=o[0];o[1];console.log(c);var s=Object(n.useState)(e.show),i=Object(r.a)(s,2);i[0],i[1];return l.a.createElement("div",{style:{borderRadius:"0"}},l.a.createElement(W.a,{show:e.show,onHide:e.handleClose,dialogClassName:"modal-90w"},l.a.createElement(W.a.Body,{className:"d-flex ".concat(t<=1024?"flex-column":"flex-row"),style:{padding:0,borderRadius:0}},l.a.createElement(G,{data:e.data}))))},V=a(78),q=a(51),X=a.n(q),M=a(79),Y=a(80),J=a.n(Y),Z=(a(66),function(e){var t=e.type,a=e.setProfilePhotoChanged,o=Object(n.useContext)(p),c=Object(r.a)(o,2),s=c[0],m=(c[1],Object(i.e)()),u=Object(n.useRef)(null),d=Object(n.useState)(),h=Object(r.a)(d,2),f=h[0],E=h[1],g=Object(n.useState)(),b=Object(r.a)(g,2),v=(b[0],b[1]),j=Object(n.useState)(),y=Object(r.a)(j,2),w=y[0],x=y[1],N=Object(n.useState)(),C=Object(r.a)(N,2),S=(C[0],C[1],function(){var e=Object(M.a)(X.a.mark((function e(t){var a,n,l;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(t.target.files),"image"===(null===t||void 0===t||null===(a=t.target)||void 0===a||null===(n=a.files[0])||void 0===n||null===(l=n.type)||void 0===l?void 0:l.slice(0,5))){e.next=8;break}return E(0),alert("File type unsupported - please only upload images"),e.abrupt("return");case 8:console.log(window.URL.createObjectURL(t.target.files[0])),x(window.URL.createObjectURL(t.target.files[0])),E(1);case 11:v(t.target.files[0]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(n.useState)(Object(V.a)({unit:"px",x:130,y:50,width:50,height:50,aspect:1,maxHeight:1200,maxWidth:1200,minHeight:500},"minHeight",500)),P=Object(r.a)(k,2),U=P[0],L=P[1],T=Object(n.useState)(null),F=Object(r.a)(T,2),I=(F[0],F[1],Object(n.useState)(null)),A=Object(r.a)(I,2),z=A[0],R=A[1],D=Object(n.useState)(null),B=Object(r.a)(D,2),H=B[0],W=B[1],G=Object(n.useState)(null),_=Object(r.a)(G,2),q=(_[0],_[1]),Y=function(e,t){var a=document.createElement("canvas"),n=e.naturalWidth/e.width,l=e.naturalHeight/e.height;a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(e,t.x*n,t.y*l,t.width*n*2,t.height*l*2,0,0,2*t.width,2*t.height);var o=new FileReader;a.toBlob((function(e){console.log(e),W(e),o.readAsDataURL(e),o.onloadend=function(){}}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col text-center"},l.a.createElement("p",null,H&&"Image preview: ".concat(H.size/1e3," kb")),w&&l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a,{crop:U,src:w,onImageLoaded:function(e){R(e)},onComplete:function(e){if(z&&e.width&&e.height){var t=Y(z,e);q(t)}},onChange:function(e){console.log("Changed!"),L(e)}}))),l.a.createElement("div",{className:"col text-center"},s.user?l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{method:"post",encType:"multipart/form-data",id:"#",onSubmit:function(e){if(e.preventDefault(),console.log(H),H.size>4e5)alert("File too large - please select images under 400kb");else{var n=new FormData;n.append("imageUpload",H),t||(n.append("caption",u.current.value),n.append("authorName",s.user)),t&&(n.append("type",t),n.append("username",s.user)),O.a.post("http://localhost:5000/api",n,{headers:{encType:"multipart/form-data","Content-Type":"application/x-www-form-urlencoded","Access-Control-Allow-Origin":"*"}}).then((function(e){if(console.log(e),t&&e&&a(!0),"error"in(null===e||void 0===e?void 0:e.data))return alert(e.data.error),void(t||m.push("/"));"success"in(null===e||void 0===e?void 0:e.data)&&setTimeout((function(){x(e.data.location),alert("Image uploaded!"),t||m.push("/")}),1e3)})).catch((function(e){console.log(e)}))}}},l.a.createElement("div",{className:"form-group files"},l.a.createElement("label",{onClick:S},"Upload Your File (max: 400kb)"),l.a.createElement("input",{type:"file",className:"form-control",name:"file",multiple:"",onChange:S,accept:"image/*"})),!t&&l.a.createElement("textarea",{style:{width:"100%"},ref:u,placeholder:"Enter a caption..."}),f&&H?l.a.createElement("button",{className:"btn btn-success my-2"},"Upload"):l.a.createElement("button",{className:"btn btn-success",disabled:!0},"Upload"))):"You must log in first!"))}),K=function(e){var t=Object(i.e)(),a=Object(n.useContext)(p),o=Object(r.a)(a,2),c=o[0],s=(o[1],Object(n.useRef)(null)),m=(window.outerWidth,Object(n.useContext)(h)),u=Object(r.a)(m,2),d=u[0];u[1];console.log(d),console.log("XZXXZXZXZ",c.user);var f=Object(n.useState)(e.show),E=Object(r.a)(f,2),g=(E[0],E[1],Object(n.useState)()),b=Object(r.a)(g,2),v=(b[0],b[1]);return l.a.createElement("div",{style:{borderRadius:"0"}},l.a.createElement(W.a,{show:e.show,onHide:function(){e.handleProfileModalClose()},dialogClassName:"modal-90w"},l.a.createElement(W.a.Header,{closeButton:!0},l.a.createElement(W.a.Title,null,"Edit Profile")),l.a.createElement(W.a.Body,null,l.a.createElement(z.a,{className:"mx-auto mb-3",style:{width:"80%"}},l.a.createElement(z.a.Group,null,l.a.createElement(Z,{type:"profilePhoto",setProfilePhotoChanged:function(e){v(e)}})),l.a.createElement(z.a.Group,{controlId:"formEmail"},l.a.createElement(z.a.Label,{for:"bioText"},"Profile Bio"),l.a.createElement("textarea",{placeholder:"Enter a bio",className:"form-control",id:"bioText",rows:"3",ref:s})))),l.a.createElement(W.a.Footer,null,l.a.createElement(R.a,{variant:"secondary"},"Close"),l.a.createElement(R.a,{variant:"primary",onClick:function(){var a={username:c.user,bio:s.current.value};O.a.post("http://localhost:5000/updateProfile",a).then((function(a){console.log("epm",a.data),e.setProfileData(a.data.value),e.handleProfileModalClose(),t.go(0)})).catch((function(e){console.log(e)}))}},"Save changes"))))},Q=function(e){var t,a=e.match,o=Object(i.e)(),c=window.outerWidth,s=a.params.userID,m=Object(n.useState)(),u=Object(r.a)(m,2),d=u[0],h=u[1],f=Object(n.useState)(),b=Object(r.a)(f,2),y=b[0],w=b[1],x=Object(n.useState)(!1),N=Object(r.a)(x,2),C=N[0],S=N[1],k=Object(n.useState)(),P=Object(r.a)(k,2),U=P[0],L=P[1],T=Object(n.useState)(!1),I=Object(r.a)(T,2),A=I[0],z=I[1];Object(n.useEffect)((function(){O.a.post("http://localhost:5000/photos/",{queryType:"user",author:s}).then((function(e){console.log(e.data),w(e.data)})).catch((function(e){console.log(e)})),O.a.post("http://localhost:5000/profile/",{username:s}).then((function(e){console.log(e),h(e.data[0])})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){U&&S(1)}),[U]);var D=Object(n.useContext)(p),B=Object(r.a)(D,2),H=B[0];B[1];return l.a.createElement(j,null,l.a.createElement(K,{show:A,handleProfileModalClose:function(){return z(!1)},handleProfileModalShow:function(){return z(!0)},setProfileData:function(e){return h(e)}}),U&&l.a.createElement(_,{show:C,handleClose:function(){return S(!1)},handleShow:function(){return S(!0)},data:U}),l.a.createElement(E.a,null,l.a.createElement(g.a,{className:"mb-5",style:{}},l.a.createElement(v.a,{xs:3,className:"mx-auto mt-5"},l.a.createElement("img",{src:"https://pixelshare.s3.amazonaws.com/".concat(s),alt:"User's profile photo",className:"rounded-circle",style:{height:"80px",width:"80px"}})),l.a.createElement(v.a,{xs:9,className:"mt-5"},l.a.createElement("div",{className:"d-flex align-items-center mb-2"},l.a.createElement("p",{style:{fontSize:"28px",margin:0}},s),(null===s||void 0===s?void 0:s.toLowerCase())==(null===H||void 0===H||null===(t=H.user)||void 0===t?void 0:t.toLowerCase())&&l.a.createElement(R.a,{variant:"outline-secondary ml-3",size:"sm",onClick:function(){return z(!0)}},"Edit profile")),l.a.createElement("span",{className:"mr-2"},l.a.createElement("strong",null,y?null===y||void 0===y?void 0:y.length:"Loading")," ","posts"),l.a.createElement("p",{className:"mt-2"},d&&d.bio))),l.a.createElement(g.a,null),l.a.createElement(g.a,{style:{}},l.a.createElement("div",{class:"grid-container"},y?null===y||void 0===y?void 0:y.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("img",{onClick:function(){c<768&&o.push("/p/".concat(e.fileName)),L(y[t]),console.log("Hi")},className:" img-responsive full-width ",src:"https://pixelshare.s3.amazonaws.com/".concat(e.fileName),alt:"Photo uploaded by ".concat(e.author),style:{width:"100%",objectFit:"cover",maxWidth:200}})))})):l.a.createElement("div",{style:{position:"absolute",left:"25%",right:"25%"}},l.a.createElement(F,null))))),l.a.createElement(g.a,null))},$=function(e){var t=e.match.params.fileName,a=Object(n.useState)(),o=Object(r.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(!1),m=Object(r.a)(i,2);m[0],m[1];return Object(n.useEffect)((function(){O.a.post("http://localhost:5000/photos/",{queryType:"single",fileName:t}).then((function(e){console.log(e.data),s(e.data[0])})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(j,{customWidth:"8"},l.a.createElement(E.a,null,l.a.createElement(g.a,null,l.a.createElement(v.a,{className:"mt-5"},l.a.createElement("div",{className:"d-flex flex-column flex-md-row mb-3",style:{display:"flex",flexDirection:"row",justifyContent:"center",padding:0,borderRadius:0,width:"100%",margin:"0 auto",border:"1px solid rgba(0,0,0,0.1)"}},c?l.a.createElement(G,{data:c}):l.a.createElement(F,null))))),l.a.createElement(g.a,null))},ee=function(){return l.a.createElement(j,null,l.a.createElement("div",null,l.a.createElement("div",{className:"container mt-3"},l.a.createElement("div",{className:""},l.a.createElement(Z,null)))))};var te=function(){var e=Object(n.useState)({user:null}),t=Object(r.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!0),m=Object(r.a)(c,2),u=m[0],d=m[1];return l.a.createElement("div",null,l.a.createElement(p.Provider,{value:[a,o]},l.a.createElement(h.Provider,{value:[u,d]},l.a.createElement(s.a,null,l.a.createElement(i.a,{path:"/",exact:!0,component:A}),l.a.createElement(i.a,{path:"/upload",exact:!0,component:ee}),l.a.createElement(i.a,{path:"/login",exact:!0,component:H}),l.a.createElement(i.a,{path:"/signup",exact:!0,component:H}),l.a.createElement(i.a,{path:"/user/:userID",component:Q}),l.a.createElement(i.a,{path:"/p/:fileName",component:$})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},26:function(e,t,a){e.exports={card:"image_card__wyPX5",username:"image_username__ji5El",profilePhoto:"image_profilePhoto__1R2ei"}},65:function(e,t,a){e.exports=a.p+"static/media/trash.740028d4.svg"},81:function(e,t,a){e.exports=a(122)},86:function(e,t,a){},87:function(e,t,a){},93:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.74c92611.chunk.js.map