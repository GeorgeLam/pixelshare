{"version":3,"sources":["components/1.jpg","firebase.js","Context.js","Layout.js","components/ImageHeader.js","components/ImageControls.js","components/CommentBox.js","components/RecentPhoto.js","components/Loader.js","components/Image.js","Home.js","components/SignUp.js","components/SignIn.js","Account.js","components/ImageDetailedBox.js","components/ImageModal.js","components/Uploader.js","components/EditProfileModal.js","UserPage.js","PhotoPage.js","Upload.js","App.js","serviceWorker.js","index.js","styles/image.module.css","img/trash.svg"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","UserContext","React","createContext","ModalContext","Layout","pageTitle","children","customWidth","history","useHistory","useState","username","setUsername","useContext","setState","onAuthStateChanged","user","console","log","useEffect","displayName","state","Helmet","title","defer","Navbar","bg","expand","fixed","Container","style","width","Row","Brand","href","Toggle","aria-controls","Collapse","id","Nav","className","to","exact","activeClassName","onClick","signOut","then","push","catch","error","display","flexDirection","minHeight","flex","Col","xs","md","lg","ImageHeader","props","fileName","comment","author","src","alt","height","fontSize","ImageStyles","color","textDecoration","format","commentTime","toUpperCase","caption","window","confirm","axios","post","queryType","response","data","setCommentsArray","comments","require","cursor","deletedCount","alert","ImageControls","likes","includes","likesArray","setLikesArray","likeStatus","setLikeStatus","likeRef","useRef","currentUser","length","ref","map","like","idx","CommentBox","commentsArray","commentRef","borderTop","placeholder","overflow","border","resize","padding","current","value","commentValue","RecentPhoto","photo","Card","key","_id","Header","variant","maxHeight","objectFit","Body","Text","margin","fontWeight","slice","listStyle","uploadTime","Loader","size","loading","Image","recentPhotos","setRecentPhotos","query","setQuery","Home","SignUp","email","setEmail","password","setPassword","passwordConfirm","setPasswordConfirm","Form","Group","controlId","Label","Control","defaultValue","onChange","e","target","type","Button","createUserWithEmailAndPassword","res","updateProfile","SignIn","signIn","signInWithEmailAndPassword","code","message","onSubmit","form","Account","method","setMethod","ImageDetailedBox","backgroundColor","borderBottom","overflowY","deleteComment","newComments","ImageModal","browserNarrowWidth","outerWidth","modalShow","show","borderRadius","Modal","onHide","handleClose","dialogClassName","Uploader","captionRef","acceptableFile","setAcceptableFile","setFile","loaded","setLoaded","upload","a","preventDefault","files","URL","createObjectURL","unit","x","y","aspect","maxWidth","crop","setCrop","imageRef","setImageRef","croppedImage","setCroppedImage","setCroppedImageURL","getCroppedImg","image","canvas","document","createElement","scaleX","naturalWidth","scaleY","naturalHeight","getContext","drawImage","reader","FileReader","toBlob","blob","readAsDataURL","onloadend","onImageLoaded","onComplete","croppedImageUrl","encType","FormData","append","headers","setTimeout","location","name","multiple","accept","disabled","EditProfileModal","bioRef","setProfilePhotoChanged","handleProfileModalClose","closeButton","Title","for","rows","Footer","bio","setProfileData","go","UserPage","match","browserWidth","userID","params","profileData","setShow","setData","profileModalShow","setProfileModalShow","handleProfileModalShow","handleShow","toLowerCase","class","i","position","left","right","PhotoPage","setPhoto","justifyContent","Upload","App","setModalShow","Provider","path","component","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.322dcfd5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/1.a282b009.jpg\";","import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA7f27Iu24JjQOd7wp4hK-VzGwYah0nsTo\",\r\n  authDomain: \"pixelshare-dee1b.firebaseapp.com\",\r\n  databaseURL: \"https://pixelshare-dee1b.firebaseio.com\",\r\n  projectId: \"pixelshare-dee1b\",\r\n  storageBucket: \"pixelshare-dee1b.appspot.com\",\r\n  messagingSenderId: \"179184967306\",\r\n  appId: \"1:179184967306:web:8008f9f3c1fc2ac0931773\",\r\n  measurementId: \"G-FMBPRG8J4X\",\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\n","import React from \"react\";\r\n\r\nexport const UserContext = React.createContext();\r\nexport const ModalContext = React.createContext(false);\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\n// import PropTypes from \"prop-types\";\r\n// import { useStaticQuery, graphql, Link } from \"gatsby\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport { auth, firestore } from \"./firebase\";\r\nimport { UserContext } from \"./Context\";\r\n\r\nimport {\r\n  Container,\r\n  Navbar,\r\n  Nav,\r\n  Form,\r\n  FormControl,\r\n  Button,\r\n  Row,\r\n  Col,\r\n} from \"react-bootstrap/\";\r\n\r\nconst Layout = ({ pageTitle, children, customWidth }) => {\r\n  let history = useHistory();\r\n\r\n  const [username, setUsername] = useState(null);\r\n  const [state, setState] = useContext(UserContext);\r\n  // console.log(state);\r\n  // const authCheck =\r\n  auth.onAuthStateChanged(function (user) {\r\n    if (user) {\r\n      setUsername(user);\r\n      // console.log(\"User currently logged in\", user);\r\n    } else {\r\n      console.log(\"Not logged in\");\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (username?.displayName) {\r\n      setState((state) => ({ user: username.displayName }));\r\n      console.log(\"effect\");\r\n    } else {\r\n      console.log(\"effect2\");\r\n      setState((state) => ({ user: null }));\r\n    }\r\n  }, [username]);\r\n\r\n  const handleLogOut = () => {\r\n    auth\r\n      .signOut()\r\n      .then(function () {\r\n        setUsername(null);\r\n        console.log(\"You were logged out...\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet\r\n        title={pageTitle ? `Pixelshare | ${pageTitle}` : `Pixelshare`}\r\n        defer={false}\r\n      />\r\n      <Navbar bg=\"light\" expand=\"md\" fixed=\"top\">\r\n        <Container style={{ width: \"80%\" }}>\r\n          {/* <Row>\r\n            <Col> */}\r\n          <Row>\r\n            <Navbar.Brand href=\"/\">Pixelshare</Navbar.Brand>\r\n          </Row>\r\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n\r\n          {/* <Row> */}\r\n          <Navbar.Collapse id=\"basic-navbar-nav\">\r\n            <Nav className=\"ml-auto\">\r\n              <Row>\r\n                <NavLink\r\n                  to=\"/\"\r\n                  exact\r\n                  className=\"mr-2 mr-md-3\"\r\n                  activeClassName=\"mr-2 mr-md-3 font-weight-bold\"\r\n                >\r\n                  Home\r\n                </NavLink>\r\n                <NavLink\r\n                  to=\"/upload\"\r\n                  className=\"mr-2 mr-md-3\"\r\n                  activeClassName=\"mr-2 mr-md-3 font-weight-bold\"\r\n                >\r\n                  Upload\r\n                </NavLink>\r\n                {username && (\r\n                  <NavLink\r\n                    to={`/user/${username?.displayName}`}\r\n                    className=\"mr-2 mr-md-3\"\r\n                    activeClassName=\"mr-2 mr-md-3 font-weight-bold\"\r\n                  >\r\n                    {username?.displayName}\r\n                  </NavLink>\r\n                )}\r\n                {username ? (\r\n                  <Link to=\"#\" onClick={handleLogOut}>\r\n                    Log out\r\n                  </Link>\r\n                ) : (\r\n                  <NavLink to=\"/login\" activeClassName=\"font-weight-bold\">\r\n                    Login\r\n                  </NavLink>\r\n                )}\r\n              </Row>\r\n            </Nav>\r\n          </Navbar.Collapse>\r\n          {/* </Row> */}\r\n          {/* </Col>\r\n          </Row> */}\r\n        </Container>\r\n      </Navbar>\r\n\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          minHeight: \"calc(100vh)\",\r\n        }}\r\n      >\r\n        <div style={{ flex: 1 }}>\r\n          <div className=\"h-100\">\r\n            <Col\r\n              xs={12}\r\n              md={11}\r\n              lg={customWidth ? customWidth : 5}\r\n              // xl={7}\r\n              className=\"mt-5 mx-auto\"\r\n            >\r\n              {children}\r\n            </Col>\r\n          </div>\r\n        </div>\r\n\r\n        <Navbar className=\"mt-3\" bg=\"light\">\r\n          <Container>\r\n            <Row className=\"mx-auto\">\r\n              <Col>\r\n                <a href=\"https://georgelam.dev\">George Lam</a> - 2020\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Navbar>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import React, { useContext } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { format, render, cancel, register } from \"timeago.js\";\r\nimport { UserContext } from \"../Context\";\r\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n// import { faCoffee } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst ImageHeader = (props) => {\r\n  console.log(props.fileName);\r\n  let history = useHistory();\r\n\r\n  const [state, setState] = useContext(UserContext);\r\n  console.log(state.user);\r\n  console.log(props);\r\n  // const deleteComment = props.deleteComment;\r\n\r\n  const deleteComment = (commentTime, author) => {\r\n    console.log(\"Deleting\", commentTime, author);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"commentDelete\",\r\n        fileName: props.fileName, ///////////////////\r\n        commentTime: commentTime,\r\n        author: author,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        props.setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const deletePhoto = (fileName) => {\r\n    console.log(\"Deleting\", fileName);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"photoDelete\",\r\n        fileName: fileName,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        if (response.data.deletedCount) {\r\n          alert(\"Photo has been deleted!\");\r\n          history.push(\"/\");\r\n        }\r\n        // setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className={`d-flex flex-row ${props.comment && \"mb-3 px-3 py-2\"}`}>\r\n      <div style={{ flex: 1, display: \"flex\" }}>\r\n        <Link to={`/user/${props.author}`}>\r\n          <img\r\n            // src={require(\"./1.jpg\")}\r\n            src={`https://pixelshare.s3.amazonaws.com/${props.author}`}\r\n            className=\"rounded-circle mr-3 profilePhoto\"\r\n            alt=\"user's profile picture\"\r\n            width=\"30\"\r\n            height=\"30\"\r\n          ></img>\r\n        </Link>\r\n        <div\r\n          className=\"d-flex flex-column\"\r\n          style={{ fontSize: props.comment ? \"0.8em\" : \"1em\" }}\r\n        >\r\n          <Link\r\n            to={`/user/${props.author}`}\r\n            className={ImageStyles.username}\r\n            style={{ color: \"black\", textDecoration: \"none\" }}\r\n          >\r\n            {props.author}\r\n          </Link>\r\n          {props.comment && (\r\n            <>\r\n              {\" \"}\r\n              <span>{props.comment}</span>\r\n              <span style={{ fontSize: 10, color: \"gray\" }}>\r\n                {format(props.commentTime).toUpperCase()}\r\n              </span>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        {props.author == state.user && props.comment && !props.caption && (\r\n          <span\r\n            onClick={() => {\r\n              if (window.confirm(\"Confirm comment deletion?\")) {\r\n                deleteComment(props.commentTime, props.author);\r\n              }\r\n            }}\r\n          >\r\n            <img\r\n              src={require(\"../img/trash.svg\")}\r\n              style={{ height: \" 30%\", cursor: \"pointer\" }}\r\n            ></img>\r\n          </span>\r\n        )}\r\n        {props.author == state.user && !props.comment && !props.caption && (\r\n          <span\r\n            onClick={() => {\r\n              if (window.confirm(\"Confirm photo deletion?\")) {\r\n                deletePhoto(props.fileName);\r\n              }\r\n            }}\r\n          >\r\n            <img\r\n              src={require(\"../img/trash.svg\")}\r\n              style={{ height: \" 30%\", cursor: \"pointer\" }}\r\n            ></img>\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageHeader;\r\n","import React, { useContext, useRef, useState } from \"react\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../Context\";\r\nimport { ModalContext } from \"../Context\";\r\n\r\nconst ImageControls = (props) => {\r\n  let history = useHistory();\r\n\r\n  //   console.log(props);\r\n  const [state, setState] = useContext(UserContext);\r\n  const [modalShow, setModalShow] = useContext(ModalContext);\r\n  console.log(props?.data?.likes?.includes(state.user));\r\n  const [likesArray, setLikesArray] = useState(props.data.likes || []);\r\n  const [likeStatus, setLikeStatus] = useState(\r\n    props?.data?.likes?.includes(state.user)\r\n  );\r\n  const likeRef = useRef();\r\n\r\n  const handleComment = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    history.push(`/p/${props.data.fileName}`);\r\n  };\r\n\r\n  const handleLike = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    console.log(\"Liking\", state);\r\n    console.log(likeRef);\r\n    setLikeStatus(!likeStatus);\r\n    // likeRef.current.span.outerHTML = `<span>Liked by <strong>${state.user}</strong>`;\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"like\",\r\n        fileName: props.data.fileName,\r\n        currentUser: state.user,\r\n        likeStatus: likeStatus,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setLikesArray(response.data.likes);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex flex-row\" style={{ color: \"black\", fontSize: 11 }}>\r\n        <Link to=\"#\" className=\"mr-2\" onClick={handleLike}>\r\n          {likeStatus ? <span>Unlike</span> : <span>Like</span>}\r\n        </Link>\r\n        <Link onClick={handleComment}>Comment</Link>\r\n      </div>\r\n      <div>\r\n        {likesArray?.length ? (\r\n          <>\r\n            {\" \"}\r\n            <span ref={likeRef}>Liked by </span>\r\n            {likesArray.map((like, idx) => (\r\n              <>\r\n                {idx ? \", \" : \"\"}\r\n                <strong>\r\n                  <Link style={{ color: \"black\" }} to={`/user/${like}`}>\r\n                    {like}\r\n                  </Link>\r\n                </strong>\r\n              </>\r\n            ))}\r\n          </>\r\n        ) : (\r\n          <span></span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageControls;\r\n","import React, { useContext, useRef, useState, useEffect } from \"react\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../Context\";\r\n\r\nconst CommentBox = (props) => {\r\n  let history = useHistory();\r\n  console.log(props.commentsArray);\r\n  // console.log(props.data.fileName);\r\n  const [state, setState] = useContext(UserContext);\r\n  const [commentsArray, setCommentsArray] = useState(props.commentsArray || []);\r\n\r\n  useEffect(() => {\r\n    console.log(commentsArray);\r\n  }, [commentsArray]);\r\n\r\n  const commentRef = useRef();\r\n\r\n  const handleComment = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    console.log(\"Posting\", state);\r\n    console.log(commentRef.current.value);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"comment\",\r\n        commentValue: commentRef.current.value,\r\n        fileName: props.data.fileName,\r\n        currentUser: state.user,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        commentRef.current.value = \"\";\r\n        props.setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        borderTop: \"1px solid rgba(0,0,0,0.1)\",\r\n      }}\r\n    >\r\n      <textarea\r\n        placeholder=\"Add a comment...\"\r\n        ref={commentRef}\r\n        style={{\r\n          width: \"100%\",\r\n          overflow: \"auto\",\r\n          border: \"none\",\r\n          resize: \"none\",\r\n          height: 40,\r\n          padding: \"0.4em 0.8em\",\r\n        }}\r\n      ></textarea>\r\n      <Link to=\"#\" style={{ padding: \"0.4em 0.7em\" }} onClick={handleComment}>\r\n        Post\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentBox;\r\n","import React, { useState } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { format, render, cancel, register } from \"timeago.js\";\r\n\r\nimport Card from \"react-bootstrap/Card\";\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageControls from \"./ImageControls\";\r\nimport CommentBox from \"./CommentBox\";\r\n\r\nconst RecentPhoto = ({ photo }) => {\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  console.log(\"ajaja\", photo);\r\n  const [commentsArray, setCommentsArray] = useState(photo.comments || []);\r\n\r\n  return (\r\n    <Card\r\n      key={photo._id}\r\n      style={{ width: \"100%\" }}\r\n      // className={ImageStyles.card}\r\n      className=\"my-5\"\r\n    >\r\n      <Card.Header>\r\n        <ImageHeader author={photo.author} fileName={photo.fileName} />\r\n      </Card.Header>\r\n      <img\r\n        variant=\"top\"\r\n        src={aws + photo.fileName}\r\n        // src={require(\"./1.jpg\")}\r\n        alt={`Photo uploaded by ${photo.author}`}\r\n        style={{ maxHeight: 500, objectFit: \"cover\", width: \"100%\" }}\r\n      />\r\n      <Card.Body>\r\n        <ImageControls data={photo} />\r\n\r\n        <Card.Text>\r\n          {photo?.caption && <span>{photo?.caption}</span>}\r\n          <ul style={{ margin: 0, padding: 0 }}>\r\n            {commentsArray?.length > 2 && (\r\n              <Link\r\n                to={`/p/${photo?.fileName}`}\r\n                style={{ color: \"gray\", fontWeight: 400 }}\r\n              >\r\n                See all {commentsArray?.length} comments\r\n              </Link>\r\n            )}\r\n            {commentsArray?.length ? (\r\n              commentsArray?.slice(commentsArray.length - 2).map((comment) => (\r\n                <li style={{ listStyle: \"none\" }}>\r\n                  <strong className=\"mr-1\">\r\n                    <Link\r\n                      style={{ color: \"black\" }}\r\n                      to={`/user/${comment.user}`}\r\n                    >\r\n                      {comment.user}\r\n                    </Link>\r\n                  </strong>\r\n                  {comment.comment}\r\n                </li>\r\n              ))\r\n            ) : (\r\n              <></>\r\n            )}\r\n          </ul>\r\n          <span style={{ fontSize: 10 }}>\r\n            <Link to={`/p/${photo.fileName}`} style={{ color: \"gray\" }}>\r\n              {format(photo.uploadTime).toUpperCase()}\r\n            </Link>\r\n          </span>\r\n        </Card.Text>\r\n      </Card.Body>\r\n      <div>\r\n        <CommentBox\r\n          style={{ width: \"100%\" }}\r\n          data={photo}\r\n          commentsArray={commentsArray}\r\n          setCommentsArray={setCommentsArray}\r\n        />\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RecentPhoto;\r\n","import React from \"react\";\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\nimport { css } from \"@emotion/core\";\r\nimport ScaleLoader from \"react-spinners/ScaleLoader\";\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"my-5 text-center\">\r\n      <div className=\"mb-2\">Loading ...</div>\r\n      <div>\r\n        <div className=\"sweet-loading\">\r\n          <ScaleLoader\r\n            style={{ display: \"block\", margin: \"0 auto\" }}\r\n            size={150}\r\n            color={\"#123abc\"}\r\n            loading={1}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport RecentPhoto from \"./RecentPhoto\";\r\nimport Loader from \"./Loader\";\r\n\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst Image = () => {\r\n  const [showImageCount, setShowImageCount] = useState(3);\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  const [recentPhotos, setRecentPhotos] = useState();\r\n  // const recentPhotos = [\"../img/1.jpg\"];\r\n  const [commentsArray, setCommentsArray] = useState([]);\r\n  const [query, setQuery] = useState(\"recent\");\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\"/photos\", { queryType: query })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setRecentPhotos(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }, [query]);\r\n\r\n  return (\r\n    <div>\r\n      {recentPhotos ? (\r\n        <>\r\n          {recentPhotos?.slice(0, 100).map((photo, idx) => (\r\n            <RecentPhoto photo={photo} />\r\n          ))}\r\n          <span className=\"d-flex justify-content-center mb-3\">\r\n            <Link\r\n              to=\"#\"\r\n              onClick={() => {\r\n                // setShowImageCount(showImageCount + 3);\r\n                setQuery(\"moreRecentPhotos\");\r\n              }}\r\n            >\r\n              Load more photos...\r\n            </Link>\r\n          </span>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Loader />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Image;\r\n","import React from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Image from \"./components/Image\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\n\r\nconst Home = () => {\r\n  return (\r\n    <Layout pageTitle=\"Home\" customWidth={4}>\r\n      <Container>\r\n        <Row>\r\n          <Col xs={12} className=\"mx-auto\">\r\n            <Image />\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\n\r\nimport axios from \"axios\";\r\nimport { auth, firebase } from \"../firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { Card, Button, Form } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst SignUp = () => {\r\n  let history = useHistory();\r\n\r\n  const [email, setEmail] = useState();\r\n  const [username, setUsername] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [passwordConfirm, setPasswordConfirm] = useState();\r\n\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  //   const [recentPhotos, setRecentPhotos] = useState();\r\n  const recentPhotos = [\"../img/1.jpg\"];\r\n\r\n  //   useEffect(() => {\r\n  //     axios\r\n  //       .get(\"http://localhost:5000/photos\")\r\n  //       .then((response) => {\r\n  //         console.log(response.data);\r\n  //         setRecentPhotos(response.data);\r\n  //       })\r\n  //       .catch(function (error) {\r\n  //         console.log(error);\r\n  //       });\r\n  //   }, []);\r\n\r\n  const handleEmailInput = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const handleUsernameInput = (e) => {\r\n    setUsername(e.target.value);\r\n  };\r\n  const handlePasswordInput = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n  const handlePasswordConfirmInput = (e) => {\r\n    setPasswordConfirm(e.target.value);\r\n  };\r\n  const handleSignUp = () => {\r\n    if (password !== passwordConfirm) {\r\n      alert(\"Passwords do not match!\");\r\n      return;\r\n    }\r\n    const details = { email, password, passwordConfirm };\r\n    // console.log(details);\r\n    console.log(\"Signing up...\", email, password);\r\n    // axios\r\n    //   .post(\"http://localhost:5000/signup\", details)\r\n    //   .then(function (response) {\r\n    //     console.log(response.data);\r\n    //   })\r\n    //   .catch(function (error) {\r\n    //     console.log(error);\r\n    //   });\r\n  };\r\n\r\n  const signUp = () => {\r\n    auth\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then((res) => {\r\n        return auth.currentUser.updateProfile({\r\n          displayName: username,\r\n        });\r\n      })\r\n      .then(function () {\r\n        console.log(\"Logged in...\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        //   key={photo._id}\r\n        style={{ width: \"100%\" }}\r\n        // className={ImageStyles.card}\r\n        className=\"my-5\"\r\n      >\r\n        <Card.Header>\r\n          <span className=\"text-center\">Sign Up</span>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Form className=\"mx-auto mb-3\" style={{ width: \"80%\" }}>\r\n            <Form.Group controlId=\"formEmail\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                defaultValue={email}\r\n                onChange={handleEmailInput}\r\n                type=\"email\"\r\n                placeholder=\"Enter email\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formUsername\">\r\n              <Form.Label>Username</Form.Label>\r\n              <Form.Control\r\n                defaultValue={username}\r\n                onChange={handleUsernameInput}\r\n                type=\"username\"\r\n                placeholder=\"Enter username\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formPassword\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                defaultValue={password}\r\n                onChange={handlePasswordInput}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formPasswordConfirm\">\r\n              <Form.Label>Confirm Password</Form.Label>\r\n              <Form.Control\r\n                defaultValue={passwordConfirm}\r\n                onChange={handlePasswordConfirmInput}\r\n                type=\"password\"\r\n                placeholder=\"Confirm your password\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Button\r\n              variant=\"primary\"\r\n              type=\"button\"\r\n              className=\"w-100\"\r\n              onClick={signUp}\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form>{\" \"}\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\nimport { auth, firestore } from \"../firebase\";\r\n\r\nimport { Card, Button, Form } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\n\r\nconst SignIn = () => {\r\n  let history = useHistory();\r\n\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n\r\n  const handleEmailInput = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const handlePasswordInput = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n  const handleSignIn = () => {\r\n    console.log(\"Signing in...\", email, password);\r\n  };\r\n\r\n  const signIn = () => {\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(function () {\r\n        console.log(\"Logged in...\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch(function (error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        console.log(error);\r\n        // ...\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Card\r\n        //   key={photo._id}\r\n        style={{ width: \"100%\" }}\r\n        // className={ImageStyles.card}\r\n        className=\"my-5\"\r\n      >\r\n        <Card.Header>\r\n          <span className=\"text-center\">Sign In</span>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <Form\r\n            className=\"mx-auto mb-3\"\r\n            style={{ width: \"80%\" }}\r\n            onSubmit={signIn}\r\n            id=\"signInForm\"\r\n          >\r\n            <Form.Group controlId=\"formEmail\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                defaultValue={email}\r\n                onChange={handleEmailInput}\r\n                type=\"email\"\r\n                placeholder=\"Enter email\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formPassword\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                defaultValue={password}\r\n                onChange={handlePasswordInput}\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n              />\r\n            </Form.Group>\r\n\r\n            <Button\r\n              variant=\"primary\"\r\n              type=\"button\"\r\n              className=\"w-100\"\r\n              onClick={signIn}\r\n              form=\"signInForm\"\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form>{\" \"}\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport SignUp from \"./components/SignUp\";\r\nimport SignIn from \"./components/SignIn\";\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\nimport { auth, firestore } from \"./firebase\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n} from \"react-router-dom\";\r\n\r\nconst Account = () => {\r\n  auth.onAuthStateChanged(function (user) {\r\n    if (user) {\r\n      console.log(\"User currently logged in\", user);\r\n    } else {\r\n      console.log(\"Not logged in\");\r\n    }\r\n  });\r\n\r\n  const [method, setMethod] = useState(true);\r\n\r\n  return (\r\n    <Layout customWidth={10}>\r\n      <Container>\r\n        <Row>\r\n          <Col xs={12} md={8} lg={5} className=\"mx-auto\">\r\n            {method ? <SignIn /> : <SignUp />}\r\n            <p className=\"text-center\">\r\n              Click{\" \"}\r\n              <Link\r\n                to=\"#\"\r\n                onClick={() => {\r\n                  setMethod(!method);\r\n                }}\r\n              >\r\n                here\r\n              </Link>{\" \"}\r\n              to {method ? \"sign up\" : \"sign in\"}\r\n            </p>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n      <Row />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Account;\r\n","import React, { useRef, useContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageControls from \"./ImageControls\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { UserContext } from \"../Context\";\r\nimport { format, render, cancel, register } from \"timeago.js\";\r\nimport CommentBox from \"./CommentBox\";\r\n\r\nconst ImageDetailedBox = (props) => {\r\n  let setSrc = props.data ? props.data : require(\"./1.jpg\");\r\n  console.log(\"!!!\", props.data);\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n\r\n  let history = useHistory();\r\n  const [state, setState] = useContext(UserContext);\r\n  const [commentsArray, setCommentsArray] = useState(props.data.comments || []);\r\n\r\n  const commentRef = useRef();\r\n\r\n  useEffect(() => {\r\n    console.log(commentsArray);\r\n  }, [commentsArray]);\r\n\r\n  const handleComment = () => {\r\n    if (!state.user) {\r\n      history.push(\"/login\");\r\n      return;\r\n    }\r\n    if (!commentRef.current.value) return;\r\n    console.log(\"Posting\", state);\r\n    console.log(commentRef.current.value);\r\n\r\n    axios\r\n      .post(\"/photoUpdate/\", {\r\n        queryType: \"comment\",\r\n        commentValue: commentRef.current.value,\r\n        fileName: props.data.fileName,\r\n        currentUser: state.user,\r\n      })\r\n      .then((response) => {\r\n        commentRef.current.value = \"\";\r\n        console.log(response.data);\r\n        setCommentsArray(response.data.comments);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          // minWidth: \"60%\"\r\n          flex: 1,\r\n        }}\r\n      >\r\n        <img\r\n          // src={require(\"./1.jpg\")}\r\n          src={aws + props.data.fileName}\r\n          style={{\r\n            maxHeight: 600,\r\n            objectFit: \"cover\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n          }}\r\n        ></img>{\" \"}\r\n      </div>\r\n      <>\r\n        <div\r\n          className=\"d-flex flex-column\"\r\n          style={{\r\n            backgroundColor: \"white\",\r\n            // border: \"1px solid rgba(0,0,0,0.3)\",\r\n            // minWidth: 250,\r\n            // flex: 1,\r\n            // height: \"100%\",\r\n            // overflowY: \"auto\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              borderBottom: \"1px solid rgba(0,0,0,0.1)\",\r\n              padding: \"0.8em\",\r\n            }}\r\n          >\r\n            <ImageHeader\r\n              author={props.data.author}\r\n              fileName={props.data.fileName}\r\n            />\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              borderBottom: \"1px solid rgba(0,0,0,0.1)\",\r\n              //   padding: \"0.8em\",\r\n              height: \"75%\",\r\n              overflowY: \"auto\",\r\n            }}\r\n          >\r\n            <div>\r\n              {props?.data?.caption && (\r\n                <ImageHeader\r\n                  author={props.data.author}\r\n                  comment={props.data.caption}\r\n                  commentTime={props.data.uploadTime}\r\n                  caption={1}\r\n                />\r\n              )}\r\n              {commentsArray?.length ? (\r\n                commentsArray?.map((comment) => (\r\n                  <ImageHeader\r\n                    author={comment.user}\r\n                    comment={comment.comment}\r\n                    commentTime={comment.commentTime}\r\n                    fileName={props.data.fileName}\r\n                    deleteComment={1}\r\n                    setCommentsArray={(newComments) => {\r\n                      console.log(\"sca\");\r\n                      setCommentsArray(newComments);\r\n                    }}\r\n                  />\r\n                ))\r\n              ) : (\r\n                <span className=\"p-2\"></span>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div\r\n            style={{\r\n              padding: \"0.8em\",\r\n            }}\r\n          >\r\n            <ImageControls data={props.data} />\r\n\r\n            <span style={{ fontSize: 10 }}>\r\n              <Link to={`/p/${props.data.fileName}`} style={{ color: \"gray\" }}>\r\n                {format(props.data.uploadTime).toUpperCase()}\r\n              </Link>\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <CommentBox\r\n              data={props.data}\r\n              commentsArray={commentsArray}\r\n              setCommentsArray={setCommentsArray}\r\n            />\r\n          </div>\r\n        </div>\r\n      </>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageDetailedBox;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\n\r\nimport { Card, Button, Form, Modal } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageDetailedBox from \"./ImageDetailedBox\";\r\nimport { ModalContext } from \"../Context\";\r\n\r\nconst ImageModal = (props) => {\r\n  const browserNarrowWidth = window.outerWidth;\r\n  const [modalShow, setModalShow] = useContext(ModalContext);\r\n\r\n  console.log(modalShow);\r\n  // console.log(\"sasasas\", props);\r\n  const [show, setShow] = useState(props.show);\r\n\r\n  //   const handleClose = () => setShow(false);\r\n  //   const handleShow = () => setShow(true);\r\n\r\n  return (\r\n    <div style={{ borderRadius: \"0\" }}>\r\n      <Modal\r\n        show={props.show}\r\n        onHide={props.handleClose}\r\n        dialogClassName=\"modal-90w\"\r\n        // style={{ width: \"90%\" }}\r\n      >\r\n        <Modal.Body\r\n          className={`d-flex ${\r\n            browserNarrowWidth <= 1024 ? \"flex-column\" : \"flex-row\"\r\n          }`}\r\n          style={{\r\n            padding: 0,\r\n            borderRadius: 0,\r\n          }}\r\n        >\r\n          <ImageDetailedBox data={props.data} />\r\n        </Modal.Body>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageModal;\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { auth, firestore } from \"../firebase\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\n\r\nimport Layout from \"../Layout\";\r\nimport { UserContext } from \"../Context\";\r\n\r\nconst Uploader = ({ type }) => {\r\n  const [state, setState] = useContext(UserContext);\r\n  let history = useHistory();\r\n  const captionRef = useRef(null);\r\n\r\n  // console.log(\"up\");\r\n  const data = { hello: \"here it is\" };\r\n  const [acceptableFile, setAcceptableFile] = useState();\r\n  const [file, setFile] = useState();\r\n  const [loaded, setLoaded] = useState();\r\n  const [recentFile, setRecentFile] = useState();\r\n\r\n  const upload = async (e) => {\r\n    e.preventDefault();\r\n    console.log(e.target.files);\r\n    if (e?.target?.files[0]?.type?.slice(0, 5) !== \"image\") {\r\n      setAcceptableFile(0);\r\n      alert(\"File type unsupported - please only upload images\");\r\n      return;\r\n    } else {\r\n      console.log(window.URL.createObjectURL(e.target.files[0]));\r\n      setLoaded(window.URL.createObjectURL(e.target.files[0]));\r\n\r\n      setAcceptableFile(1);\r\n    }\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    // console.log(window.URL.createObjectURL(croppedImage));\r\n\r\n    // console.log(\"uppp\");\r\n    console.log(croppedImage);\r\n\r\n    if (croppedImage.size > 400000) {\r\n      alert(\"File too large - please select images under 400kb\");\r\n      return;\r\n    }\r\n\r\n    var data = new FormData();\r\n    data.append(\"imageUpload\", croppedImage);\r\n    if (!type) {\r\n      data.append(\"caption\", captionRef.current.value);\r\n      data.append(\"authorName\", state.user);\r\n    }\r\n    if (type) {\r\n      data.append(\"type\", type);\r\n      data.append(\"username\", state.user);\r\n    }\r\n    // let postUrl = type\r\n    //   ? \"http://localhost:5000/profilePhoto\"\r\n    //   : \"http://localhost:5000/api\";\r\n\r\n    axios\r\n      .post(\"/api\", data, {\r\n        headers: {\r\n          encType: \"multipart/form-data\",\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n        },\r\n      })\r\n      .then((response) => {\r\n        console.log(response);\r\n        if (type) {\r\n          alert(\"Profile photo will take around a minute to update\");\r\n        }\r\n        if (\"error\" in response?.data) {\r\n          alert(response.data.error);\r\n          if (!type) history.push(\"/\");\r\n          return;\r\n        }\r\n        if (\"success\" in response?.data && !type) {\r\n          setTimeout(() => {\r\n            setLoaded(response.data.location);\r\n            alert(\"Image uploaded!\");\r\n            if (!type) history.push(\"/\");\r\n          }, 1000);\r\n        }\r\n      })\r\n\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  //   useEffect(() => {\r\n  //     if (loaded) {\r\n  //       setRecentFile(loaded);\r\n  //     }\r\n  //   }, [loaded]);\r\n\r\n  //Image crop functions start\r\n  const [crop, setCrop] = useState({\r\n    unit: \"px\", // default, can be 'px' or '%'\r\n    x: 130,\r\n    y: 50,\r\n    width: 50,\r\n    height: 50,\r\n    aspect: 1 / 1,\r\n    maxHeight: 1200,\r\n    maxWidth: 1200,\r\n    minHeight: 500,\r\n    minHeight: 500,\r\n  });\r\n\r\n  const [completedCrop, setCompletedCrop] = useState(null);\r\n  const [imageRef, setImageRef] = useState(null);\r\n  const [croppedImage, setCroppedImage] = useState(null);\r\n  const [croppedImageURL, setCroppedImageURL] = useState(null);\r\n\r\n  const onImageLoaded = (image) => {\r\n    setImageRef(image);\r\n    // setCroppedImage(image);\r\n  };\r\n\r\n  const onCropChange = (crop) => {\r\n    console.log(\"Changed!\");\r\n    setCrop(crop);\r\n  };\r\n\r\n  const onCropComplete = (crop) => {\r\n    if (imageRef && crop.width && crop.height) {\r\n      const croppedImageUrl = getCroppedImg(imageRef, crop);\r\n      setCroppedImageURL(croppedImageUrl);\r\n    }\r\n  };\r\n\r\n  const getCroppedImg = (image, crop) => {\r\n    const canvas = document.createElement(\"canvas\");\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    canvas.width = crop.width;\r\n    canvas.height = crop.height;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX * 2,\r\n      crop.height * scaleY * 2,\r\n      0,\r\n      0,\r\n      crop.width * 2,\r\n      crop.height * 2\r\n    );\r\n\r\n    const reader = new FileReader();\r\n    canvas.toBlob((blob) => {\r\n      console.log(blob);\r\n      setCroppedImage(blob);\r\n      reader.readAsDataURL(blob);\r\n      reader.onloadend = () => {\r\n        // dataURLtoFile(reader.result, \"c.jpg\");\r\n      };\r\n    });\r\n  };\r\n\r\n  const dataURLtoFile = (dataurl, filename) => {\r\n    let arr = dataurl.split(\",\"),\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]),\r\n      n = bstr.length,\r\n      u8arr = new Uint8Array(n);\r\n\r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    let croppedImage = new File([u8arr], filename, { type: mime });\r\n    setCroppedImage(croppedImage);\r\n    console.log(\"nci\", croppedImage);\r\n  };\r\n\r\n  //Image crop functions end\r\n\r\n  return (\r\n    <>\r\n      <div className=\"col text-center\">\r\n        <p>{croppedImage && `Image preview: ${croppedImage.size / 1000} kb`}</p>\r\n\r\n        {loaded && (\r\n          <>\r\n            {/* <img style={{ width: 400 }} src={loaded}></img> */}\r\n            <ReactCrop\r\n              crop={crop}\r\n              src={loaded}\r\n              onImageLoaded={onImageLoaded}\r\n              onComplete={onCropComplete}\r\n              onChange={onCropChange}\r\n            />\r\n          </>\r\n        )}\r\n        {/* {croppedImage && (\r\n                <>\r\n                  <p>Hi</p>\r\n                  <img src={croppedImage}></img>\r\n                </>\r\n              )} */}\r\n      </div>\r\n\r\n      <div className=\"col text-center\">\r\n        {state.user ? (\r\n          <>\r\n            <form\r\n              method=\"post\"\r\n              // action=\"http://localhost:5000/api\"\r\n              encType=\"multipart/form-data\"\r\n              id=\"#\"\r\n              onSubmit={handleUpload}\r\n            >\r\n              <div className=\"form-group files\">\r\n                <label>Upload Your File (max: 400kb)</label>\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"form-control\"\r\n                  name=\"file\"\r\n                  multiple=\"\"\r\n                  onChange={upload}\r\n                  accept=\"image/*\"\r\n                ></input>\r\n              </div>\r\n              {!type && (\r\n                <textarea\r\n                  style={{ width: \"100%\" }}\r\n                  ref={captionRef}\r\n                  placeholder=\"Enter a caption...\"\r\n                ></textarea>\r\n              )}\r\n              {acceptableFile && croppedImage ? (\r\n                <button className=\"btn btn-success my-2\">Upload</button>\r\n              ) : (\r\n                <button className=\"btn btn-success\" disabled>\r\n                  Upload\r\n                </button>\r\n              )}\r\n            </form>\r\n          </>\r\n        ) : (\r\n          \"You must log in first!\"\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Uploader;\r\n","import React, { useEffect, useState, useContext, useRef } from \"react\";\r\nimport { useHistory, BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport { Card, Button, Form, Modal } from \"react-bootstrap/\";\r\nimport ImageStyles from \"../styles/image.module.css\";\r\nimport ImageHeader from \"./ImageHeader\";\r\nimport ImageDetailedBox from \"./ImageDetailedBox\";\r\nimport Uploader from \"./Uploader\";\r\nimport { ModalContext } from \"../Context\";\r\nimport { UserContext } from \"../Context\";\r\n\r\nconst EditProfileModal = (props) => {\r\n  let history = useHistory();\r\n  const [state, setState] = useContext(UserContext);\r\n  const bioRef = useRef(null);\r\n\r\n  const browserNarrowWidth = window.outerWidth;\r\n  const [modalShow, setModalShow] = useContext(ModalContext);\r\n\r\n  console.log(modalShow);\r\n  console.log(\"XZXXZXZXZ\", state.user);\r\n  // console.log(\"sasasas\", props);\r\n  const [show, setShow] = useState(props.show);\r\n  const [profilePhotoChanged, setProfilePhotoChanged] = useState();\r\n\r\n  //   const handleClose = () => setShow(false);\r\n  //   const handleShow = () => setShow(true);\r\n\r\n  const updateProfile = () => {\r\n    let data = {\r\n      username: state.user,\r\n      bio: bioRef.current.value,\r\n    };\r\n    // if (profilePhotoChanged) {\r\n    //   data.photo = `https://pixelshare.s3.amazonaws.com/${state.user}`;\r\n    // }\r\n\r\n    axios\r\n      .post(\"/updateProfile\", data)\r\n      .then((response) => {\r\n        // console.log(\"epm\", response.data);\r\n        console.log(\"epm\", response.data);\r\n        props.setProfileData(response.data.value);\r\n        props.handleProfileModalClose();\r\n        history.go(0);\r\n      })\r\n\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div style={{ borderRadius: \"0\" }}>\r\n      <Modal\r\n        show={props.show}\r\n        onHide={() => {\r\n          props.handleProfileModalClose();\r\n        }}\r\n        dialogClassName=\"modal-90w\"\r\n        // style={{ width: \"90%\" }}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Edit Profile</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form className=\"mx-auto mb-3\" style={{ width: \"80%\" }}>\r\n            <Form.Group>\r\n              <Uploader\r\n                type=\"profilePhoto\"\r\n                setProfilePhotoChanged={(a) => {\r\n                  setProfilePhotoChanged(a);\r\n                }}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group controlId=\"formEmail\">\r\n              <Form.Label for=\"bioText\">Profile Bio</Form.Label>\r\n              <textarea\r\n                // defaultValue={bio}\r\n                // onChange={handleBioInput}\r\n                placeholder=\"Enter a bio\"\r\n                className=\"form-control\"\r\n                id=\"bioText\"\r\n                rows=\"3\"\r\n                ref={bioRef}\r\n              />\r\n            </Form.Group>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\">Close</Button>\r\n          <Button variant=\"primary\" onClick={updateProfile}>\r\n            Save changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfileModal;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap/\";\r\n\r\nimport Layout from \"./Layout\";\r\nimport Image from \"./components/Image\";\r\nimport ImageModal from \"./components/ImageModal\";\r\nimport EditProfileModal from \"./components/EditProfileModal\";\r\nimport Loader from \"./components/Loader\";\r\nimport { UserContext } from \"./Context\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\n\r\nconst UserPage = ({ match }) => {\r\n  let history = useHistory();\r\n  const browserWidth = window.outerWidth;\r\n  const {\r\n    params: { userID },\r\n  } = match;\r\n\r\n  // const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  const [profileData, setProfileData] = useState();\r\n  const [recentPhotos, setRecentPhotos] = useState();\r\n  const [show, setShow] = useState(false);\r\n  const [data, setData] = useState();\r\n\r\n  const [profileModalShow, setProfileModalShow] = useState(false);\r\n  // const recentPhotos = [\"../img/1.jpg\"];\r\n  // console.log(\"rrr\", useContext(UserContext));\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(`/photos/`, {\r\n        queryType: \"user\",\r\n        author: userID,\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setRecentPhotos(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    axios\r\n      .post(`/profile/`, {\r\n        // queryType: \"user\",\r\n        username: userID,\r\n      })\r\n      .then((response) => {\r\n        console.log(response);\r\n        setProfileData(response.data[0]);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (data) setShow(1);\r\n  }, [data]);\r\n\r\n  const [state, setState] = useContext(UserContext);\r\n\r\n  const openProfileModal = () => {\r\n    console.log(\"Opening profile modal\");\r\n  };\r\n\r\n  return (\r\n    <Layout pageTitle={userID}>\r\n      {/* <p>Hello, {state.user}</p> */}\r\n      <EditProfileModal\r\n        show={profileModalShow}\r\n        handleProfileModalClose={() => setProfileModalShow(false)}\r\n        handleProfileModalShow={() => setProfileModalShow(true)}\r\n        setProfileData={(data) => setProfileData(data)}\r\n      />\r\n      {data && (\r\n        <ImageModal\r\n          show={show}\r\n          handleClose={() => setShow(false)}\r\n          handleShow={() => setShow(true)}\r\n          data={data}\r\n        />\r\n      )}\r\n      <Container>\r\n        <Row\r\n          className=\"mb-5\"\r\n          style={\r\n            {\r\n              // margin: \"0 auto\", width: \"60%\"\r\n            }\r\n          }\r\n        >\r\n          <Col xs={3} className=\"mx-auto mt-5\">\r\n            <img\r\n              src={`https://pixelshare.s3.amazonaws.com/${userID}`}\r\n              alt=\"User's profile photo\"\r\n              className=\"rounded-circle\"\r\n              style={{ height: \"80px\", width: \"80px\" }}\r\n            ></img>\r\n          </Col>\r\n          <Col xs={9} className=\"mt-5\">\r\n            <div className=\"d-flex align-items-center mb-2\">\r\n              <p style={{ fontSize: \"28px\", margin: 0 }}>{userID}</p>\r\n              {userID?.toLowerCase() == state?.user?.toLowerCase() && (\r\n                <Button\r\n                  variant=\"outline-secondary ml-3\"\r\n                  size=\"sm\"\r\n                  onClick={() => setProfileModalShow(true)}\r\n                >\r\n                  Edit profile\r\n                </Button>\r\n              )}\r\n            </div>\r\n            <span className=\"mr-2\">\r\n              <strong>{recentPhotos ? recentPhotos?.length : \"Loading\"}</strong>{\" \"}\r\n              posts\r\n            </span>\r\n\r\n            <p className=\"mt-2\">{profileData && profileData.bio}</p>\r\n          </Col>\r\n        </Row>\r\n        <Row></Row>\r\n        <Row\r\n          style={\r\n            {\r\n              // width: \"80%\", margin: \"0 auto\"\r\n            }\r\n          }\r\n        >\r\n          <div class=\"grid-container\">\r\n            {/* <Col xs={12} style={{ width: \"80%\", margin: \"0 auto\" }}> */}\r\n            {recentPhotos ? (\r\n              recentPhotos?.map((photo, i) => (\r\n                <>\r\n                  {/* <Col xs={4} className=\"mb-4\"> */}\r\n                  <div>\r\n                    <img\r\n                      onClick={() => {\r\n                        if (browserWidth < 768) {\r\n                          history.push(`/p/${photo.fileName}`);\r\n                        }\r\n                        // setShow(1);\r\n                        setData(recentPhotos[i]);\r\n                        console.log(\"Hi\");\r\n                      }}\r\n                      className=\" img-responsive full-width \"\r\n                      src={`https://pixelshare.s3.amazonaws.com/${photo.fileName}`}\r\n                      alt={`Photo uploaded by ${photo.author}`}\r\n                      style={{\r\n                        width: \"100%\",\r\n                        // height: \"260px\",\r\n                        objectFit: \"cover\",\r\n                        maxWidth: 200,\r\n                      }}\r\n                    ></img>\r\n                  </div>\r\n                  {/* </Col> */}\r\n                </>\r\n              ))\r\n            ) : (\r\n              <div style={{ position: \"absolute\", left: \"25%\", right: \"25%\" }}>\r\n                <Loader />\r\n              </div>\r\n            )}\r\n          </div>\r\n          {/* </Col> */}\r\n        </Row>\r\n      </Container>\r\n      <Row />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UserPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport Layout from \"./Layout\";\r\nimport Image from \"./components/Image\";\r\nimport Loader from \"./components/Loader\";\r\nimport ImageModal from \"./components/ImageModal\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap/\";\r\nimport ImageDetailedBox from \"./components/ImageDetailedBox\";\r\n\r\nconst PhotoPage = ({ match }) => {\r\n  const {\r\n    params: { fileName },\r\n  } = match;\r\n\r\n  const aws = \"https://pixelshare.s3.eu-west-2.amazonaws.com/\";\r\n  const [photo, setPhoto] = useState();\r\n  const [show, setShow] = useState(false);\r\n  // const recentPhotos = [\"../img/1.jpg\"];\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\"http://localhost:5000/photos/\", { queryType: \"single\", fileName })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        setPhoto(response.data[0]);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <Layout customWidth=\"8\">\r\n      <Container>\r\n        <Row>\r\n          <Col className=\"mt-5\">\r\n            <div\r\n              className=\"d-flex flex-column flex-md-row mb-3\"\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                justifyContent: \"center\",\r\n                padding: 0,\r\n                borderRadius: 0,\r\n                width: \"100%\",\r\n                margin: \"0 auto\",\r\n                border: \"1px solid rgba(0,0,0,0.1)\",\r\n              }}\r\n            >\r\n              {photo ? <ImageDetailedBox data={photo} /> : <Loader />}\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n      <Row />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default PhotoPage;\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\nimport Layout from \"./Layout\";\r\nimport Uploader from \"./components/Uploader\";\r\n\r\nconst Upload = () => {\r\n  return (\r\n    <Layout pageTitle=\"Upload\">\r\n      <div>\r\n        <div className=\"container mt-3\">\r\n          <div className=\"\">\r\n            <Uploader />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n","import React, { useState } from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport \"./App.css\";\r\n\r\nimport Layout from \"./Layout\";\r\n\r\nimport Home from \"./Home\";\r\nimport Account from \"./Account\";\r\nimport UserPage from \"./UserPage\";\r\nimport PhotoPage from \"./PhotoPage\";\r\nimport Upload from \"./Upload\";\r\nimport Image from \"./components/Image\";\r\nimport { UserContext } from \"./Context\";\r\nimport { ModalContext } from \"./Context\";\r\n\r\nfunction App() {\r\n  const [state, setState] = useState({ user: null });\r\n  const [modalShow, setModalShow] = useState(true);\r\n\r\n  return (\r\n    <div>\r\n      <UserContext.Provider value={[state, setState]}>\r\n        <ModalContext.Provider value={[modalShow, setModalShow]}>\r\n          <Router>\r\n            <Route path=\"/\" exact component={Home} />\r\n            <Route path=\"/upload\" exact component={Upload} />\r\n            <Route path=\"/login\" exact component={Account} />\r\n            <Route path=\"/signup\" exact component={Account} />\r\n            <Route path=\"/user/:userID\" component={UserPage} />\r\n            <Route path=\"/p/:fileName\" component={PhotoPage} />\r\n          </Router>\r\n        </ModalContext.Provider>\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"image_card__wyPX5\",\"username\":\"image_username__ji5El\",\"profilePhoto\":\"image_profilePhoto__1R2ei\"};","module.exports = __webpack_public_path__ + \"static/media/trash.740028d4.svg\";"],"sourceRoot":""}